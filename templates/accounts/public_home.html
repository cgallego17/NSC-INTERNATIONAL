{% load static %}
{% load i18n %}
{% load translation_tags %}
{% get_current_language as CURRENT_LANGUAGE %}
<!DOCTYPE html>
<html lang="{% if CURRENT_LANGUAGE %}{{ CURRENT_LANGUAGE|slice:":2" }}{% else %}en{% endif %}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% trans "NCS International - Professional Baseball" %}</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --mlb-blue: #0d2c54;
            --mlb-red: #d50032;
            --mlb-light-blue: #132448;
            --mlb-gold: #ffd700;
            --mlb-dark: #1a1a1a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'Helvetica', sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }


        /* Navbar MLB Style */
        .navbar-mlb {
            background: var(--mlb-blue) !important;
            padding: 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .navbar-mlb .navbar-brand {
            font-size: 1.8rem;
            font-weight: 700;
            color: white !important;
            padding: 15px 20px;
            background: var(--mlb-red);
            display: flex;
            align-items: center;
        }

        .navbar-logo {
            height: 40px;
            width: auto;
            max-width: 180px;
            object-fit: contain;
        }

        .navbar-mlb .nav-link {
            color: white !important;
            font-weight: 600;
            padding: 20px 15px !important;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
            transition: background 0.3s;
        }

        .navbar-mlb .nav-link:hover {
            background: var(--mlb-light-blue);
        }

        .navbar-mlb .nav-link.active {
            background: var(--mlb-red);
        }

        /* ============================================
           HERO SLIDER - NUEVO DESDE CERO
           ============================================ */
        .hero-mlb {
            position: relative;
            width: 100%;
            max-width: 1905px;
            margin: 0 auto;
            padding: 0;
            background-color: #000;
            overflow: hidden;
        }

        .hero-slider-container {
            position: relative;
            width: 100%;
            max-width: 1905px;
            margin: 0 auto;
            overflow: hidden;
            background-color: #000;
            /* La altura se calculará dinámicamente con JavaScript */
            min-height: 300px;
        }

        .hero-slider-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            background-color: #000;
        }

        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #000;
        }

        .hero-slide.active {
            opacity: 1;
            z-index: 1;
        }

        .hero-slide img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center center;
            display: block;
        }

        /* Barra de progreso roja */
        .hero-progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background-color: rgba(213, 0, 50, 0.2);
            z-index: 10;
        }

        .hero-progress-bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #d50032 0%, #ff1744 50%, #d50032 100%);
            transition: width 5s linear !important;
            box-shadow: 0 0 10px rgba(213, 0, 50, 0.5);
            will-change: width;
        }

        /* Controles de navegación */
        .hero-slider-controls {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .hero-slider-controls:hover {
            background: rgba(255, 255, 255, 0.4);
            border-color: rgba(255, 255, 255, 0.8);
        }

        .hero-slider-controls.prev {
            left: 20px;
        }

        .hero-slider-controls.next {
            right: 20px;
        }

        .hero-slider-controls i {
            color: white;
            font-size: 1.2rem;
        }

        /* Media Queries Responsive - El aspect ratio se mantiene automáticamente con padding-bottom */
        @media (max-width: 992px) {
            .hero-slider-controls {
                width: 40px;
                height: 40px;
            }

            .hero-slider-controls.prev {
                left: 10px;
        }

            .hero-slider-controls.next {
                right: 10px;
        }
        }

        @media (max-width: 768px) {
            .hero-slider-controls {
                width: 35px;
                height: 35px;
            }

            .hero-slider-controls.prev {
                left: 5px;
            }

            .hero-slider-controls.next {
                right: 5px;
            }

            .hero-slider-controls i {
                font-size: 1rem;
            }
        }

        @media (max-width: 576px) {
            .hero-progress-bar {
                height: 4px;
            }
        }


        /* ============================================
           CSS ANTIGUO - ELIMINAR DESPUÉS
           ============================================ */
        .hero-mlb .carousel-inner {
            width: 100%;
            height: 600px;
            max-width: 1905px;
            margin: 0;
            padding: 0;
            position: relative;
            overflow: hidden;
            background-color: transparent;
            border: none;
            line-height: 0;
        }

        /* Eliminar espacios en blanco y padding de Bootstrap */
        .hero-mlb .carousel-inner > * {
            margin: 0;
            padding: 0;
        }

        /* Desktop grande (1400px - 1905px) */
        @media (min-width: 1400px) and (max-width: 1905px) {
            .hero-mlb .carousel-inner {
                height: 650px;
            }

            .hero-mlb .carousel-item {
                height: 650px;
        }

            .hero-slide-item.banner-image {
                height: 650px;
                background-color: transparent;
            }

            .hero-slide-item.banner-image img {
            width: auto;
                height: auto;
                max-width: 100%;
                max-height: 100%;
            object-fit: contain;
                object-position: center center;
            }
        }

        /* Para pantallas muy grandes (>1905px) */
        @media (min-width: 1906px) {
            .hero-mlb {
                display: flex;
                justify-content: center;
            }

            .hero-mlb .carousel-inner {
                width: 1905px;
                height: 700px;
                background-color: transparent;
        }

            .hero-mlb .carousel-item {
                height: 700px;
                background-color: transparent;
        }

            .hero-slide-item.banner-image {
                height: 700px;
                background-color: transparent;
        }

            .hero-slide-item.banner-image img {
                width: auto;
                height: auto;
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                object-position: center center;
            }
        }

        /* Desktop mediano (1201px - 1399px) */
        @media (min-width: 1201px) and (max-width: 1399px) {
        .hero-mlb .carousel-inner {
                height: 600px;
                background-color: transparent;
            }

            .hero-mlb .carousel-item {
                height: 600px;
                background-color: transparent;
            }

            .hero-slide-item.banner-image {
                height: 600px;
                background-color: transparent;
            }

            .hero-slide-item.banner-image img {
                width: auto;
                height: auto;
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                object-position: center center;
            }
        }

        /* Asegurar que carousel-item y hero-slide-item tengan la misma altura */
        .hero-mlb .carousel-item.active {
            display: block;
        }

        .hero-mlb .carousel-item {
            height: 600px;
            margin: 0;
            padding: 0;
            border: none;
            background-color: transparent;
            line-height: 0;
        }

        .hero-mlb .carousel-item.active {
            display: block;
        }

        /* Eliminar espacios en blanco de los elementos hijos */
        .hero-mlb .carousel-item > * {
            margin: 0;
            padding: 0;
        }

        .hero-slide-item {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 100%;
            display: flex;
            align-items: center;
            overflow: hidden;
        }

        .hero-slide-item img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center center;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
            display: block;
            /* Suavizado de la imagen para mejor calidad */
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            max-width: 100%;
            max-height: 100%;
        }

        /* Ajuste para banners de tipo imagen - adaptarse sin expandirse */
        .hero-slide-item.banner-image {
            background-color: transparent;
            width: 100%;
            height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            margin: 0;
        }

        .hero-slide-item.banner-image img {
            position: relative;
            width: auto;
            height: auto;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            object-position: center center;
            background-color: transparent;
            display: block;
            z-index: 0;
        }

        /* Ajuste para banner de World Series - adaptarse sin expandirse */
        .hero-slide-item img[alt*="World Series"] {
            object-fit: contain;
            object-position: center center;
            max-width: 100%;
            max-height: 100%;
        }

        /* Mejorar el responsive de las imágenes en diferentes tamaños */
        @media (max-width: 992px) {
            .hero-slide-item.banner-image img {
                width: auto;
                height: auto;
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                object-position: center center;
            }
        }

        /* Eliminar cualquier fondo azul o blanco en todos los breakpoints */
        .hero-mlb .carousel-inner {
            background-color: transparent !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        .hero-mlb .carousel-item {
            background-color: transparent !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        .hero-slide-item {
            background-color: transparent !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        /* Eliminar espacios en blanco del HTML sin afectar el contenido */
        .hero-mlb .carousel-inner {
            white-space: nowrap;
        }

        .hero-mlb .carousel-item {
            white-space: normal;
        }

        .hero-slide-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.1);
            z-index: 1;
        }

        .hero-slide-item::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
            z-index: 1;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .hero-content {
            position: relative;
            z-index: 2;
            padding: 0 20px;
        }

        .hero-mlb .container-fluid {
            padding-left: 2rem;
            padding-right: 2rem;
        }

        .hero-mlb .col-lg-8 {
            width: 100%;
        }

        @media (min-width: 992px) {
            .hero-mlb .col-lg-8 {
                width: 66.666667%;
            }
        }

        .carousel-control-prev,
        .carousel-control-next {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0.8;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .carousel-control-prev {
            left: 20px;
        }

        .carousel-control-next {
            right: 20px;
        }

        .carousel-control-prev:hover,
        .carousel-control-next:hover {
            background: rgba(255, 255, 255, 0.5);
            opacity: 1;
        }

        /* Ocultar indicadores del carousel */
        .carousel-indicators {
            display: none !important;
        }

        /* Barra roja decorativa en la parte inferior del hero */
        .hero-mlb::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background-color: var(--mlb-red, #d50032);
            background: linear-gradient(90deg, #d50032 0%, #ff1744 50%, #d50032 100%);
            z-index: 10;
            box-shadow: 0 -2px 8px rgba(213, 0, 50, 0.3);
        }

        .carousel-item {
            transition: transform 0.6s ease-in-out;
        }

        .carousel-fade .carousel-item {
            opacity: 0;
            transition-property: opacity;
            transform: none;
        }

        .carousel-fade .carousel-item.active,
        .carousel-fade .carousel-item-next.carousel-item-start,
        .carousel-fade .carousel-item-prev.carousel-item-end {
            opacity: 1;
        }

        .carousel-fade .active.carousel-item-start,
        .carousel-fade .active.carousel-item-end {
            opacity: 0;
        }

        .carousel-item.active {
            display: block;
            height: auto;
        }

        .hero-mlb .carousel-item.active {
            display: block;
            height: auto;
            min-height: inherit;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            line-height: 1.2;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            margin-bottom: 2rem;
            line-height: 1.5;
        }

        .btn-mlb {
            background: var(--mlb-red);
            color: white;
            padding: 12px 30px;
            font-weight: 700;
            text-transform: uppercase;
            border: none;
            border-radius: 4px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(213, 0, 50, 0.3);
            font-size: 1rem;
        }

        .btn-mlb:hover {
            background: #b30029;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(213, 0, 50, 0.4);
            color: white;
        }

        .btn-mlb-outline {
            background: transparent;
            color: white;
            border: 2px solid white;
            padding: 12px 30px;
            font-weight: 700;
            text-transform: uppercase;
            border-radius: 4px;
            transition: all 0.3s;
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .btn-mlb-outline {
                padding: 10px 25px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 576px) {
            .btn-mlb-outline {
                padding: 8px 20px;
                font-size: 0.85rem;
            }
        }

        .btn-mlb-outline:hover {
            background: white;
            color: var(--mlb-blue);
        }

        /* ============================================
           HERO MLB - MEDIA QUERIES RESPONSIVE
           Organizados por breakpoints
           ============================================ */

        /* Desktop pequeño / Tablet XL (993px - 1200px) */
        @media (min-width: 993px) and (max-width: 1200px) {
            .hero-mlb .carousel-inner {
                height: 580px;
            }

            .hero-mlb .carousel-item {
                height: 580px;
            }

            .hero-mlb .carousel-item.active {
                height: 580px;
            }

            .hero-slide-item.banner-image {
                height: 580px;
                background-color: transparent;
            }

            .hero-slide-item.banner-image img {
                width: auto;
                height: auto;
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                object-position: center center;
            }
        }

        /* Tablet Large (≤1200px) */
        @media (max-width: 1200px) {
            .hero-mlb .carousel-inner {
                height: 550px;
                background-color: transparent;
            }

            .hero-mlb .carousel-item {
                height: 550px;
                background-color: transparent;
            }

            .hero-mlb .carousel-item.active {
                height: 550px;
                background-color: transparent;
            }

            .hero-slide-item {
                min-height: 100%;
                background-color: transparent;
            }

            .hero-slide-item img {
                object-fit: contain;
                object-position: center center;
                max-width: 100%;
                max-height: 100%;
            }

            .hero-slide-item.banner-image {
                height: 550px;
                background-color: transparent;
            }

            .hero-slide-item.banner-image img {
                width: auto;
                height: auto;
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                object-position: center center;
            }

            .hero-title {
                font-size: 3rem;
            }

            .hero-content {
                padding: 0 15px;
            }
        }

        /* Tablet (≤992px) */
        @media (max-width: 992px) {
            .hero-mlb .carousel-inner {
                height: 500px;
                background-color: transparent;
            }

            .hero-mlb .carousel-item {
                height: 500px;
                background-color: transparent;
            }

            .hero-mlb .carousel-item.active {
                height: 500px;
                background-color: transparent;
            }

            .hero-slide-item {
                min-height: 100%;
                background-color: transparent;
            }

            .hero-slide-item img {
                object-fit: contain;
                object-position: center center;
                max-width: 100%;
                max-height: 100%;
            }

            .hero-slide-item.banner-image {
                height: 500px;
                background-color: transparent;
            }

            .hero-slide-item.banner-image img {
                width: auto;
                height: auto;
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                object-position: center center;
            }

            .hero-title {
                font-size: 2.5rem;
                letter-spacing: 1.5px;
            }

            .hero-subtitle {
                font-size: 1.15rem;
                margin-bottom: 1.5rem;
            }

            .hero-content {
                padding: 0 15px;
            }

            .hero-mlb .container-fluid {
                padding-left: 1.5rem;
                padding-right: 1.5rem;
            }

            .hero-mlb .col-lg-8 {
                width: 100%;
                max-width: 100%;
            }
        }

        /* Mobile Large (≤768px) */
        @media (max-width: 768px) {
            .hero-mlb .carousel-inner {
                height: 400px;
                background-color: transparent;
            }

            .hero-mlb .carousel-item {
                height: 400px;
                background-color: transparent;
            }

            .hero-mlb .carousel-item.active {
                height: 400px;
                background-color: transparent;
            }

            .hero-slide-item {
                min-height: 100%;
                background-color: transparent;
            }

            .hero-slide-item img {
                object-fit: contain;
                object-position: center center;
                max-width: 100%;
                max-height: 100%;
            }

            .hero-slide-item.banner-image {
                height: 400px;
                background-color: transparent;
            }

            .hero-slide-item.banner-image img {
                width: auto;
                height: auto;
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                object-position: center center;
            }

            .hero-slide-item img[alt*="World Series"] {
                object-fit: contain;
                object-position: center center;
                max-width: 100%;
                max-height: 100%;
            }

            .hero-title {
                font-size: 2rem;
                letter-spacing: 1px;
                margin-bottom: 0.75rem;
            }

            .hero-subtitle {
                font-size: 1rem;
                margin-bottom: 1.25rem;
            }

            .hero-content {
                padding: 0 10px;
            }

            .hero-mlb .container-fluid {
                padding-left: 1rem;
                padding-right: 1rem;
            }

            .carousel-control-prev,
            .carousel-control-next {
                width: 40px;
                height: 40px;
            }

            .carousel-control-prev {
                left: 10px;
            }

            .carousel-control-next {
                right: 10px;
            }

            .carousel-indicators {
                display: none !important;
            }

            .btn-mlb {
                padding: 10px 25px;
                font-size: 0.9rem;
            }
        }

        /* Mobile (≤576px) */
        @media (max-width: 576px) {
            .hero-mlb .carousel-inner {
                height: 350px;
                background-color: transparent;
            }

            .hero-mlb .carousel-item {
                height: 350px;
                background-color: transparent;
            }

            .hero-mlb .carousel-item.active {
                height: 350px;
                background-color: transparent;
            }

            .hero-slide-item {
                min-height: 100%;
                background-color: transparent;
            }

            .hero-slide-item img {
                object-fit: contain;
                object-position: center center;
                max-width: 100%;
                max-height: 100%;
            }

            .hero-slide-item.banner-image {
                height: 350px;
                background-color: transparent;
            }

            .hero-slide-item.banner-image img {
                width: auto;
                height: auto;
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                object-position: center center;
            }

            .hero-slide-item img[alt*="World Series"] {
                object-fit: contain;
                object-position: center center;
                max-width: 100%;
                max-height: 100%;
            }

            .hero-title {
                font-size: 1.5rem;
                letter-spacing: 0.5px;
                margin-bottom: 0.5rem;
            }

            .hero-subtitle {
                font-size: 0.9rem;
                margin-bottom: 1rem;
            }

            .hero-content {
                padding: 0 5px;
            }

            .hero-mlb .container-fluid {
                padding-left: 0.75rem;
                padding-right: 0.75rem;
            }

            .carousel-control-prev,
            .carousel-control-next {
                width: 35px;
                height: 35px;
                opacity: 0.6;
            }

            .carousel-control-prev {
                left: 5px;
            }

            .carousel-control-next {
                right: 5px;
            }

            .carousel-indicators {
                display: none !important;
            }

            .btn-mlb {
                padding: 8px 20px;
                font-size: 0.85rem;
            }
        }

        /* Main Content */
        .main-content {
            padding: 0;
        }

        .main-content > .container-fluid {
            padding: 40px 0;
        }

        /* Section Headers */
        .section-header {
            background: var(--mlb-blue);
            color: white;
            padding: 15px 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        .section-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
            margin: 0;
            letter-spacing: 1px;
        }

        .section-header .view-all {
            color: var(--mlb-gold);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .section-header .view-all:hover {
            text-decoration: underline;
        }

        /* Game/Event Cards MLB Style */
        .game-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
            margin-bottom: 20px;
            border-top: 4px solid var(--mlb-red);
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .game-card-header {
            background: var(--mlb-blue);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .game-card-header .date {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .game-card-header .status {
            background: var(--mlb-red);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .game-card-body {
            padding: 20px;
        }

        .game-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--mlb-blue);
            margin-bottom: 10px;
        }

        .game-info {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .game-info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            font-size: 0.9rem;
        }

        .game-info-item i {
            color: var(--mlb-red);
        }

        .game-description {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .game-card-footer {
            padding: 15px 20px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Feature Cards */
        .feature-card {
            background: white;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
            height: 100%;
            border-top: 4px solid var(--mlb-red);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: var(--mlb-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 1.8rem;
        }

        .feature-card h4 {
            color: var(--mlb-blue);
            font-weight: 700;
            margin-bottom: 15px;
            text-transform: uppercase;
            font-size: 1.1rem;
        }

        /* Instagram Style Gallery Section */
        .instagram-gallery-section {
            padding: 0px 0;
            background: #000;
            width: 100%;
        }

        .instagram-gallery-header {
            text-align: center;
            margin-bottom: 2px;
            padding: 40px 20px;
            background: white;
        }

        .instagram-gallery-header h2 {
            color: var(--mlb-blue);
            font-size: 2.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .instagram-gallery-header h2 i {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .instagram-follow-link {
            display: inline-block;
            color: var(--mlb-red);
            font-size: 1.2rem;
            font-weight: 600;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .instagram-follow-link:hover {
            color: #b30029;
            text-decoration: underline;
        }

        .instagram-gallery-container {
            width: 100%;
            overflow: hidden;
            background: #000;
        }

        .instagram-gallery-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 2px;
            width: 100%;
            background: #000;
        }

        .instagram-gallery-item {
            position: relative;
            width: 100%;
            aspect-ratio: 270 / 278;
            overflow: hidden;
            background: #fff;
            cursor: pointer;
        }

        .instagram-gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .instagram-gallery-item:hover img {
            transform: scale(1.1);
        }

        .instagram-gallery-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0);
            transition: background 0.3s ease;
        }

        .instagram-gallery-item:hover::after {
            background: rgba(0, 0, 0, 0.3);
        }

        .instagram-gallery-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--mlb-blue) 0%, var(--mlb-light-blue) 100%);
            color: white;
        }

        .instagram-gallery-placeholder i {
            font-size: 3rem;
            opacity: 0.5;
        }

        @media (max-width: 1680px) {
            .instagram-gallery-grid {
                grid-template-columns: repeat(5, 1fr);
            }
        }

        @media (max-width: 1400px) {
            .instagram-gallery-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 1120px) {
            .instagram-gallery-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 840px) {
            .instagram-gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .instagram-gallery-header {
                padding: 30px 20px;
            }

            .instagram-gallery-header h2 {
                font-size: 1.8rem;
                letter-spacing: 1px;
            }

            .instagram-gallery-header h2 i {
                font-size: 1.8rem;
            }

            .instagram-gallery-item {
                width: 100%;
                height: auto;
                aspect-ratio: 1 / 1;
            }

            .instagram-gallery-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 2px;
            }
        }

        @media (max-width: 576px) {
            .instagram-gallery-header {
                padding: 25px 15px;
            }

            .instagram-gallery-header h2 {
                font-size: 1.5rem;
                letter-spacing: 0.5px;
                flex-direction: column;
                gap: 10px;
            }

            .instagram-gallery-header h2 i {
                font-size: 1.5rem;
            }

            .instagram-gallery-item {
                width: 100%;
                height: auto;
                aspect-ratio: 1 / 1;
            }

            .instagram-gallery-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 2px;
            }
        }

        @media (max-width: 400px) {
            .instagram-gallery-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1px;
            }

            .instagram-gallery-item {
                aspect-ratio: 1 / 1;
            }
        }

        /* CTA Section */
        .cta-section {
            background: linear-gradient(135deg, var(--mlb-blue) 0%, var(--mlb-light-blue) 100%);
            color: white;
            padding: 25px 0;
            text-align: center;
        }

        .cta-section h2 {
            font-size: 2.5rem;
            font-weight: 900;
            text-transform: uppercase;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .cta-section p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.95;
        }

        /* Footer MLB Style */
        .footer-mlb {
            background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
            color: #ccc;
            padding: 60px 0 0;
            position: relative;
            overflow: hidden;
        }

        .footer-mlb::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--mlb-red) 0%, var(--mlb-blue) 50%, var(--mlb-red) 100%);
        }

        .footer-mlb .container-fluid {
            position: relative;
            z-index: 1;
        }

        .footer-mlb h5 {
            color: white;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 25px;
            font-size: 1.1rem;
            letter-spacing: 1px;
            position: relative;
            padding-bottom: 12px;
        }

        .footer-mlb h5::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--mlb-red);
            border-radius: 2px;
        }

        .footer-mlb .footer-col {
            padding: 0 20px;
        }

        .footer-mlb .footer-logo-section {
            margin-bottom: 20px;
        }

        .footer-mlb .footer-logo-section img {
            filter: drop-shadow(0 2px 8px rgba(255, 255, 255, 0.1));
            transition: transform 0.3s ease;
        }

        .footer-mlb .footer-logo-section:hover img {
            transform: scale(1.05);
        }

        .footer-mlb p {
            color: #b0b0b0;
            line-height: 1.8;
            font-size: 0.95rem;
            margin-bottom: 0;
        }

        .footer-mlb a {
            color: #ccc;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            padding: 10px 15px;
            font-size: 0.95rem;
            border-radius: 6px;
            margin: 4px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .footer-mlb a i {
            margin-right: 8px;
            width: 18px;
            text-align: center;
            font-size: 0.9rem;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        .footer-mlb a:hover {
            color: white;
            background: rgba(213, 0, 50, 0.15);
            border-color: var(--mlb-red);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(213, 0, 50, 0.2);
        }

        .footer-mlb a:hover i {
            opacity: 1;
            color: var(--mlb-red);
            transform: scale(1.1);
        }

        .footer-mlb .quick-links {
            display: flex !important;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .footer-mlb .quick-links a {
            display: inline-flex !important;
            align-items: center;
            min-width: auto;
            white-space: nowrap;
            visibility: visible !important;
            opacity: 1 !important;
        }

        .footer-mlb .contact-info {
            color: #b0b0b0;
        }

        .footer-mlb .contact-info p {
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            font-size: 0.95rem;
        }

        .footer-mlb .contact-info i {
            margin-right: 12px;
            width: 20px;
            color: var(--mlb-red);
            font-size: 1rem;
            opacity: 0.9;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 25px 0;
            margin-top: 50px;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
        }

        .footer-bottom p {
            color: #888;
            font-size: 0.9rem;
            margin: 0;
        }

        @media (max-width: 768px) {
            .footer-mlb {
                padding: 40px 0 0;
            }

            .footer-mlb .footer-col {
                padding: 0 15px;
                margin-bottom: 40px;
            }

            .footer-mlb .quick-links {
                flex-direction: column;
                gap: 8px;
            }

            .footer-mlb a {
                width: 100%;
                justify-content: flex-start;
            }
        }

        /* Badge */
        .badge-mlb {
            background: var(--mlb-red);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        /* Modal Login Styles */
        .modal-mlb .modal-content {
            border-radius: 15px;
            border: none;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .modal-mlb .modal-header {
            background: linear-gradient(135deg, var(--mlb-blue) 0%, var(--mlb-light-blue) 100%);
            color: white;
            padding: 30px;
            border: none;
            position: relative;
            overflow: hidden;
        }

        .modal-mlb .modal-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        }

        .modal-mlb .modal-header .btn-close {
            filter: brightness(0) invert(1);
            opacity: 0.9;
        }

        .modal-mlb .modal-header .btn-close:hover {
            opacity: 1;
        }

        .modal-mlb .modal-title {
            font-size: 1.8rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }

        .modal-mlb .modal-body {
            padding: 40px;
        }

        .modal-mlb .form-label {
            font-weight: 600;
            color: var(--mlb-blue);
            margin-bottom: 8px;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }

        .modal-mlb .form-control {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 12px 15px;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .modal-mlb .form-control:focus {
            border-color: var(--mlb-blue);
            box-shadow: 0 0 0 0.2rem rgba(13, 44, 84, 0.25);
        }

        .modal-mlb .form-check-input {
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid #e9ecef;
            margin-top: 0.3rem;
        }

        .modal-mlb .form-check-input:checked {
            background-color: var(--mlb-red);
            border-color: var(--mlb-red);
        }

        .modal-mlb .form-check-label {
            font-weight: 500;
            color: #555;
            margin-left: 8px;
        }

        .modal-mlb .error-message {
            background: #fee;
            border: 1px solid var(--mlb-red);
            color: var(--mlb-red);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .modal-mlb .field-error {
            color: var(--mlb-red);
            font-size: 0.85rem;
            margin-top: 5px;
            font-weight: 600;
        }

        .modal-mlb .modal-footer {
            padding: 20px 40px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            text-align: center;
        }

        .modal-mlb .modal-footer a {
            color: var(--mlb-blue);
            font-weight: 600;
            text-decoration: none;
        }

        .modal-mlb .modal-footer a:hover {
            color: var(--mlb-red);
            text-decoration: underline;
        }

        .login-icon-modal {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
            text-align: center;
        }

        /* Schedule Section Styles */
        .schedule-section-card {
            background: white;
            border-radius: 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-top: 0;
            margin-bottom: 0 !important;
        }

        .schedule-section-card .container-fluid {
            padding: 0;
        }

        .schedule-image-container {
            position: relative;
            height: 100%;
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: white;
        }

        .schedule-background-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center;
            display: block;
        }

        @media (max-width: 992px) {
            .schedule-image-container {
                min-height: 400px;
            }

            .schedule-background-image {
                object-fit: cover;
                object-position: center center;
            }
        }

        .showcase-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 40px;
            display: flex;
            align-items: flex-end;
            z-index: 10;
        }

        .showcase-oval {
            position: relative;
            width: 280px;
            height: 120px;
            border: 4px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
        }

        .showcase-text {
            color: white;
            font-size: 2.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        @media (max-width: 768px) {
            .schedule-image-container {
                min-height: 300px;
            }

            .schedule-background-image {
                object-fit: cover;
                object-position: center center;
            }

            .showcase-oval {
                width: 220px;
                height: 100px;
            }

            .showcase-text {
                font-size: 2rem;
            }
        }

        @media (max-width: 576px) {
            .schedule-image-container {
                min-height: 250px;
            }
        }

        .schedule-logo {
            font-size: 2.5rem;
            font-weight: 900;
            letter-spacing: 3px;
            margin-bottom: 20px;
            text-transform: uppercase;
            color: var(--mlb-blue);
        }

        .schedule-text {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .schedule-season {
            font-size: 1.2rem;
            font-weight: 700;
            letter-spacing: 2px;
            margin-bottom: 10px;
            text-transform: uppercase;
            color: var(--mlb-blue);
        }

        .schedule-number {
            font-size: 5rem;
            font-weight: 900;
            line-height: 1;
            margin-bottom: 10px;
            font-family: 'Arial Black', sans-serif;
            color: var(--mlb-blue);
        }

        .schedule-live {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--mlb-red);
        }

        .schedule-cta-btn {
            background: var(--mlb-blue);
            color: white;
            padding: 15px 30px;
            font-weight: 700;
            text-transform: uppercase;
            text-decoration: none;
            border-radius: 4px;
            display: inline-block;
            transition: all 0.3s;
            letter-spacing: 1px;
            border: 2px solid var(--mlb-blue);
            margin-top: 20px;
        }

        .schedule-cta-btn:hover {
            background: var(--mlb-red);
            color: white;
            border-color: var(--mlb-red);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(211, 47, 47, 0.4);
        }

        .schedule-content {
            padding: 50px 40px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .schedule-heading {
            color: var(--mlb-blue);
            font-size: 2rem;
            font-weight: 900;
            text-transform: uppercase;
            margin-bottom: 15px;
            letter-spacing: 1px;
            text-align: center;
        }

        .schedule-subheading {
            color: #000;
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 20px;
            line-height: 1.4;
            letter-spacing: 0.5px;
            text-align: center;
        }

        .schedule-description {
            color: #333;
            font-size: 0.95rem;
            line-height: 1.8;
            margin-bottom: 30px;
            text-align: center;
        }

        .schedule-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .schedule-category-btn {
            border: 2px solid var(--mlb-blue);
            background: white;
            color: var(--mlb-blue);
            padding: 12px 24px;
            font-weight: 700;
            text-transform: uppercase;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.3s;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
        }

        .schedule-category-btn:hover {
            background: var(--mlb-blue);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(13, 44, 84, 0.3);
        }

        /* Video Promo Section */
        .video-promo-section {
            background: linear-gradient(135deg, #0a2e4a 0%, #1a4a6b 50%, #0d2c54 100%);
            position: relative;
            overflow: hidden;
            width: 100%;
        }

        .video-promo-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                linear-gradient(45deg, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                linear-gradient(-45deg, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);
            pointer-events: none;
        }

        .video-promo-player-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
            background: #000;
        }

        .video-promo-player-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .video-promo-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            z-index: 1;
        }

        .video-promo-video::-webkit-media-controls-panel {
            background-color: rgba(0, 0, 0, 0.5);
        }

        /* Barra de progreso del video promocional */
        .video-promo-progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.3);
            z-index: 10;
            pointer-events: none;
        }

        .video-promo-progress-bar-inner {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #d50032 0%, #ff4444 50%, #d50032 100%);
            background-size: 200% 100%;
            transition: width 0.1s linear;
            box-shadow: 0 0 20px rgba(213, 0, 50, 0.6);
            position: relative;
            animation: videoProgressBarGradient 3s linear infinite;
        }

        @keyframes videoProgressBarGradient {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        .video-promo-progress-bar:hover {
            height: 10px;
        }

        .video-promo-progress-bar:hover .video-promo-progress-bar-inner {
            box-shadow: 0 0 30px rgba(213, 0, 50, 0.8);
        }

        @media (max-width: 768px) {
            .video-promo-progress-bar {
                height: 6px;
            }
        }

        /* Floating Video Container */
        .video-promo-floating {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 320px;
            height: 180px;
            z-index: 9999;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            pointer-events: none;
        }

        .video-promo-floating.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .video-promo-floating video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* When the main video is floating, override its absolute positioning */
        .video-promo-floating .video-promo-video {
            position: static;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-promo-floating-close {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 28px;
            height: 28px;
            background: rgba(0, 0, 0, 0.7);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s;
        }

        .video-promo-floating-close:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: scale(1.1);
        }

        .video-promo-floating-close i {
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .video-promo-floating {
                width: 240px;
                height: 135px;
                bottom: 10px;
                right: 10px;
            }
        }

        .video-promo-overlay-top {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.7) 0%, transparent 100%);
            padding: 15px 20px;
            z-index: 10;
            pointer-events: none;
        }

        .video-promo-overlay-actions {
            pointer-events: auto;
        }

        .video-promo-overlay-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .video-promo-logo-small {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .video-promo-logo-small img {
            height: 30px;
            width: auto;
            max-width: 200px;
        }

        .video-promo-overlay-actions {
            display: flex;
            gap: 10px;
        }

        .video-promo-action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .video-promo-action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .video-promo-overlay-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, transparent 100%);
            padding: 15px 20px;
            z-index: 10;
        }

        .video-promo-youtube-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: white;
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.3s;
        }

        .video-promo-youtube-link:hover {
            color: var(--mlb-red);
        }

        .video-promo-youtube-link i {
            font-size: 1.2rem;
            color: #FF0000;
        }

        .video-promo-content {
            padding: 60px 40px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background: linear-gradient(135deg, #0a2e4a 0%, #1a4a6b 50%, #0d2c54 100%);
            position: relative;
        }

        .video-promo-description {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.1rem;
            line-height: 1.7;
            margin: 0 0 25px 0;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .video-promo-description p {
            margin-bottom: 10px;
        }

        .video-promo-description p:last-child {
            margin-bottom: 0;
        }

        .video-promo-description strong,
        .video-promo-description b {
            font-weight: 600;
        }

        .video-promo-description em,
        .video-promo-description i {
            font-style: italic;
        }

        .video-promo-description ul,
        .video-promo-description ol {
            margin: 10px 0;
            padding-left: 20px;
        }

        .video-promo-description li {
            margin-bottom: 5px;
        }


        .video-promo-logo {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 30px;
        }

        .video-promo-logo i {
            font-size: 3rem;
            color: var(--mlb-red);
        }

        .video-promo-logo span {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .video-promo-title {
            margin-bottom: 20px;
        }

        .video-promo-title-accent {
            display: block;
            color: var(--mlb-red);
            font-size: 1.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            line-height: 1.3;
            margin-bottom: 5px;
        }

        .video-promo-title-main {
            display: block;
            color: white;
            font-size: 1.8rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            line-height: 1.3;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .video-promo-options {
            display: flex;
            gap: 16px;
            margin-bottom: 30px;
            flex-wrap: nowrap;
            align-items: center;
            justify-content: center;
        }

        .video-promo-option-btn {
            background: linear-gradient(135deg, rgba(13, 44, 84, 0.9) 0%, rgba(19, 36, 72, 0.9) 100%);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 14px 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            white-space: nowrap;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .video-promo-option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .video-promo-option-btn:hover::before {
            left: 100%;
        }

        .video-promo-option-btn:hover {
            background: linear-gradient(135deg, rgba(13, 44, 84, 1) 0%, rgba(19, 36, 72, 1) 100%);
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 215, 0, 0.2);
        }

        .video-promo-option-btn:active {
            transform: translateY(-1px) scale(0.98);
        }

        .video-promo-option-btn i {
            font-size: 1.2rem;
            color: white;
            transition: all 0.3s;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .video-promo-option-btn:hover i {
            color: white;
            transform: scale(1.1) rotate(5deg);
        }

        .video-promo-option-btn span {
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .video-promo-twitch {
            background: #9146ff;
            border-color: #9146ff;
            padding: 12px;
        }

        .video-promo-twitch:hover {
            background: #772ce8;
            border-color: #772ce8;
        }

        .video-promo-cta-btn {
            background: var(--mlb-red);
            color: white;
            padding: 16px 32px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-align: center;
            transition: all 0.3s;
            display: block;
        }

        .video-promo-cta-btn:hover {
            background: #c1121f;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(193, 18, 31, 0.4);
            color: white;
        }

        /* Sponsors Section */
        .sponsors-section {
            padding: 80px 0;
            background: #0a1e3a;
            position: relative;
            overflow: hidden;
        }

        .sponsors-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(13, 44, 84, 0.8) 0%, rgba(10, 30, 58, 0.9) 100%);
            z-index: 0;
        }

        .sponsors-section .container {
            position: relative;
            z-index: 1;
        }

        .sponsors-title {
            color: white;
            text-align: center;
            margin-bottom: 50px;
            font-weight: 800;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-size: 2rem;
            position: relative;
        }

        .sponsors-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--mlb-red);
            border-radius: 2px;
        }

        .sponsors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 40px;
            align-items: center;
            justify-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .sponsor-card {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 20px;
            width: 100%;
            max-width: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 120px;
            transition: all 0.4s ease;
            position: relative;
        }

        .sponsor-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .sponsor-card:hover::before {
            opacity: 1;
        }

        .sponsor-card img {
            width: 100%;
            max-width: 200px;
            height: auto;
            max-height: 120px;
            object-fit: contain;
            transition: all 0.4s ease;
            position: relative;
            z-index: 1;
        }

        .sponsor-card:hover {
            transform: translateY(-8px);
        }

        .sponsor-card:hover img {
            transform: scale(1.08);
            filter: drop-shadow(0 4px 12px rgba(255, 255, 255, 0.3));
        }

        @media (max-width: 1200px) {
            .sponsors-grid {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 35px;
            }
        }

        @media (max-width: 992px) {
            .sponsors-section {
                padding: 60px 0;
            }
            .sponsors-title {
                font-size: 1.75rem;
                margin-bottom: 40px;
            }
            .sponsors-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 30px;
                padding: 15px;
            }
            .sponsor-card {
                max-width: 180px;
                min-height: 110px;
                padding: 15px;
            }
            .sponsor-card img {
                max-width: 160px;
                max-height: 110px;
            }
        }

        @media (max-width: 768px) {
            .sponsors-section {
                padding: 50px 0;
            }
            .sponsors-title {
                font-size: 1.5rem;
                margin-bottom: 35px;
            }
            .sponsors-grid {
                grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
                gap: 25px;
                padding: 10px;
            }
            .sponsor-card {
                max-width: 150px;
                min-height: 100px;
                padding: 12px;
            }
            .sponsor-card img {
                max-width: 130px;
                max-height: 100px;
            }
        }

        @media (max-width: 576px) {
            .sponsors-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            .sponsor-card {
                max-width: 100%;
                min-height: 90px;
                padding: 10px;
            }
            .sponsor-card img {
                max-width: 100%;
                max-height: 90px;
            }
        }

        @media (max-width: 992px) {
            .video-promo-content {
                padding: 40px 30px;
            }

            .video-promo-title-accent {
                font-size: 1.3rem;
            }

            .video-promo-title-main {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .video-promo-player-container {
                padding-top: 75%; /* Taller aspect ratio on mobile */
            }

            .video-promo-content {
                padding: 30px 20px;
            }

            .video-promo-title-accent {
                font-size: 1.1rem;
            }

            .video-promo-title-main {
                font-size: 1.3rem;
            }

            .video-promo-options {
                justify-content: center;
                flex-wrap: wrap;
                gap: 12px;
            }

            .video-promo-option-btn {
                flex: 0 1 auto;
                min-width: 120px;
                justify-content: center;
                white-space: nowrap;
                padding: 12px 16px;
                font-size: 0.8rem;
            }

            .video-promo-option-btn i {
                font-size: 1rem;
            }
        }

        /* Events News Style Section */
        .events-news-section {
            background: var(--mlb-blue);
            padding: 60px 40px;
            margin: 0;
        }

        .events-news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }

        .events-news-title {
            font-size: 3rem;
            font-weight: 900;
            color: white;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin: 0;
        }

        .events-view-all-btn {
            background: var(--mlb-red);
            color: white;
            padding: 12px 30px;
            font-weight: 700;
            text-transform: uppercase;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.3s;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }

        .events-view-all-btn:hover {
            background: #b30029;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(213, 0, 50, 0.4);
            color: white;
        }

        .events-news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        @media (max-width: 1200px) {
            .events-news-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .events-news-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
            }
        }


        .event-news-card {
            background: transparent;
            border-radius: 8px;
            overflow: hidden;
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .event-news-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .event-news-image {
            position: relative;
            width: 100%;
            height: 250px;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(13, 44, 84, 0.9) 0%, rgba(19, 36, 72, 0.9) 100%);
        }

        .event-news-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .event-news-card:hover .event-news-image img {
            transform: scale(1.1);
        }

        .event-news-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(13, 44, 84, 0.8) 0%, rgba(19, 36, 72, 0.8) 100%);
        }

        .event-news-placeholder i {
            font-size: 4rem;
            color: rgba(255, 255, 255, 0.3);
        }

        .event-news-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.3) 0%, transparent 50%, rgba(0,0,0,0.6) 100%);
            display: flex;
            align-items: flex-start;
            padding: 15px;
        }

        .event-news-date {
            color: white;
            font-weight: 700;
            font-size: 0.75rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 4px;
        }

        .event-news-content {
            background: rgba(13, 44, 84, 0.95);
            padding: 24px 20px;
            min-height: 100px;
            display: flex;
            align-items: center;
            transition: background 0.3s ease;
        }

        .event-news-card:hover .event-news-content {
            background: rgba(13, 44, 84, 1);
        }

        .event-news-content-inner {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .event-news-title-card {
            color: white;
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 0;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .event-news-meta {
            display: flex;
            flex-direction: row;
            gap: 16px;
            flex-wrap: wrap;
        }

        .event-news-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .event-news-meta-item i {
            color: var(--mlb-red);
            font-size: 0.8rem;
            width: 16px;
            text-align: center;
        }

        .event-news-meta-item span {
            flex: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .hero-slide-item {
                min-height: 400px !important;
            }

            .hero-slide-item i.fas {
                font-size: 8rem !important;
            }

            .hero-title {
                font-size: 2rem !important;
            }

            .hero-subtitle {
                font-size: 1rem !important;
            }

            .carousel-control-prev,
            .carousel-control-next {
                width: 40px;
                height: 40px;
            }

            .carousel-control-prev {
                left: 10px;
            }

            .carousel-control-next {
                right: 10px;
            }

            .modal-mlb .modal-body {
                padding: 30px 20px;
            }

            .schedule-section-card .row {
                flex-direction: column;
            }

            .schedule-image-container {
                min-height: 400px;
            }

            .schedule-content {
                padding: 30px 20px;
            }

            .schedule-heading {
                font-size: 1.5rem;
            }

            .schedule-number {
                font-size: 3.5rem;
            }

            .schedule-live {
                font-size: 1.5rem;
            }

            .schedule-buttons {
                flex-direction: column;
            }

            .schedule-category-btn {
                width: 100%;
                text-align: center;
            }

            .events-news-section {
                padding: 40px 20px;
            }

            .events-news-title {
                font-size: 2rem;
            }

            .events-news-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .event-news-image {
                height: 200px;
            }

            .event-news-content {
                padding: 18px 16px;
                min-height: 90px;
            }

            .event-news-title-card {
                font-size: 0.9rem;
                line-height: 1.4;
            }

            .event-news-meta-item {
                font-size: 0.8rem;
                gap: 6px;
            }

            .event-news-meta-item i {
                font-size: 0.75rem;
                width: 14px;
            }

            @media (max-width: 576px) {
                .events-news-grid {
                    grid-template-columns: 1fr;
                }

                .events-news-header {
                    flex-direction: column;
                    align-items: flex-start;
                    gap: 20px;
                }

                .events-view-all-btn {
                    width: 100%;
                    text-align: center;
                }
            }
        }
    </style>
</head>
<body>
    <!-- Top Bar and Navbar -->
    {% include 'includes/navbar_mlb.html' %}

    <!-- Hero Section - Nuevo Slider -->
    <section class="hero-mlb">
        <div class="hero-slider-container" id="heroSlider">
            <div class="hero-slider-wrapper">
                {% if home_banners %}
                    {% for banner in home_banners %}
                        <div class="hero-slide {% if forloop.first %}active{% endif %}" data-slide-index="{{ forloop.counter0 }}">
                            {% if banner.banner_type == 'image' and banner.image %}
                                <picture>
                                    {% if banner.mobile_image %}
                                        <source media="(max-width: 768px)" srcset="{{ banner.mobile_image.url }}" onerror="this.remove();">
                                    {% endif %}
                                    <img src="{{ banner.image.url }}" alt="{% if banner.title %}{{ banner.title }}{% else %}Banner{% endif %}" onerror="this.onerror=null; this.style.display='none'; this.parentElement.style.background='linear-gradient(135deg, var(--mlb-blue) 0%, var(--mlb-light-blue) 100%)'; this.parentElement.innerHTML='<div style=\'width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;\'>{% if banner.title %}{{ banner.title }}{% else %}Banner{% endif %}</div>';">
                                </picture>
                            {% else %}
                                <div style="width: 100%; height: 100%; background: linear-gradient(135deg, {{ banner.gradient_color_1 }} 0%, {{ banner.gradient_color_2 }} 50%, {{ banner.gradient_color_3|default:banner.gradient_color_2 }} 100%); display: flex; align-items: center; justify-content: center;">
                                                {% if banner.title %}
                                        <h1 style="color: white; font-size: 3rem; text-align: center;">{{ banner.title }}</h1>
                                                        {% endif %}
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}
                {% else %}
                    <!-- Fallback: Banner por defecto -->
                    <div class="hero-slide active" data-slide-index="0">
                            <img src="{% static 'images/world-series-2026-banner.png' %}" alt="NCS World Series 2026">
                    </div>
                {% endif %}
            </div>

            <!-- Controles de navegación -->
            <button class="hero-slider-controls prev" id="heroPrevBtn">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="hero-slider-controls next" id="heroNextBtn">
                <i class="fas fa-chevron-right"></i>
            </button>

            <!-- Barra de progreso roja -->
            <div class="hero-progress-bar">
                <div class="hero-progress-bar-fill" id="heroProgressBar"></div>
            </div>
        </div>
    </section>

    <!-- Video Promo Section -->
    <section class="video-promo-section">
        <div class="container-fluid px-0">
            <div class="row g-0">
                <!-- Left Column - Video Player -->
                <div class="col-lg-8">
                    <div class="video-promo-player-container">
                        <div class="video-promo-player-wrapper">
                            <div id="videoPromoInlineHost">
                                <video
                                    id="videoPromoPlayer"
                                    class="video-promo-video"
                                    controls
                                    autoplay
                                    muted
                                    playsinline
                                    style="display: block;">
                                    {% trans "Your browser does not support video playback." %}
                                </video>
                            </div>
                            <div class="video-promo-overlay-top">
                                <div class="video-promo-overlay-content">
                                    <div class="col-md-4 footer-col">
                <div class="footer-logo-section">
                    <img src="{% static 'images/ncs-white.svg' %}" alt="NCS International" style="height: 40px; width: auto; margin-bottom: 20px;">
                </div>
                <p>
                                </div>
                                <div class="video-promo-overlay-actions">
                                        <button class="video-promo-action-btn" title="{% trans 'Watch later' %}">
                                            <i class="far fa-clock"></i>
                                        </button>
                                        <button class="video-promo-action-btn video-audio-toggle" type="button"
                                                data-title-enable="{% filter escapejs %}{% trans 'Enable sound' %}{% endfilter %}"
                                                data-title-mute="{% filter escapejs %}{% trans 'Mute' %}{% endfilter %}"
                                                title="{% filter escapejs %}{% trans 'Enable sound' %}{% endfilter %}">
                                            <i class="fas fa-volume-mute"></i>
                                        </button>
                                        <button class="video-promo-action-btn" title="{% trans 'Share' %}" onclick="navigator.share ? navigator.share({title: 'NCS International Video', url: window.location.href}) : navigator.clipboard.writeText(window.location.href).then(() => alert('{% filter escapejs %}{% trans "Link copied to clipboard" %}{% endfilter %}'))">
                                            <i class="fas fa-share-alt"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- Barra de progreso del video promocional -->
                            <div id="videoPromoProgressBar" class="video-promo-progress-bar">
                                <div id="videoPromoProgressBarInner" class="video-promo-progress-bar-inner"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Promotional Content -->
                <div class="col-lg-4">
                    <div class="video-promo-content" id="videoPromoContent">
                        <h2 class="video-promo-title">
                            <span class="video-promo-title-accent" id="promoTitleAccent">{% trans "NEXT EVENT" %}</span>
                            <span class="video-promo-title-main" id="promoTitleMain">{% trans "Loading..." %}</span>
                        </h2>
                        <p class="video-promo-description" id="promoDescription">
                            {% trans "Loading event information..." %}
                        </p>
                        <div class="video-promo-options" id="promoOptions">
                            <span class="video-promo-option-btn">
                                <i class="fas fa-map-marker-alt"></i>
                                <span id="promoLocation">-</span>
                            </span>
                            <a href="{% url 'events:public_list' %}" class="video-promo-option-btn" id="promoTypeLink" style="text-decoration: none;">
                                <i class="fas fa-baseball-ball"></i>
                                <span id="promoType">-</span>
                            </a>
                        </div>
                        <a href="#" class="video-promo-cta-btn" id="promoEventLink">{% trans "VIEW EVENT" %}</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Eventos con videos para el carrusel -->
    <script id="promoEventsData" type="application/json">
    {
        "events": [
            {% if promo_events %}
                {% for event in promo_events %}
                {
                    "id": {{ event.id }},
                    "title": "{{ event.title|escapejs }}",
                    "description": "{{ event.description|striptags|escapejs|truncatewords:80 }}",
                    "video_url": {% if event.video_url %}"{{ event.video_url|escapejs }}"{% else %}null{% endif %},
                    "location": "{% if event.city %}{{ event.city.name }}{% if event.state %}, {{ event.state.name }}{% endif %}{% else %}{% if event.location %}{{ event.location }}{% else %}-{% endif %}{% endif %}",
                    "event_type": "{% if event.event_type %}{{ event.event_type.name|escapejs }}{% else %}{% filter escapejs %}{% trans "Tournament / Showcase" %}{% endfilter %}{% endif %}",
                    "event_type_id": {% if event.event_type %}{{ event.event_type.id }}{% else %}null{% endif %},
                    "divisions": "{% for division in event.divisions.all %}{{ division.name|escapejs }}{% if not forloop.last %}, {% endif %}{% empty %}{% filter escapejs %}{% trans "All Categories" %}{% endfilter %}{% endfor %}",
                    "start_date": "{{ event.start_date|date:'Y-m-d' }}",
                    "detail_url": "{% url 'events:public_detail' event.pk %}"
                }{% if not forloop.last %},{% endif %}
                {% endfor %}
            {% endif %}
        ]
    }
    </script>

    <!-- Season Schedule Section -->
    <div class="schedule-section-card mb-5">
        <div class="container-fluid px-0">
            <div class="row g-0">
                <!-- Left Column - Image -->
                <div class="col-lg-6">
                    <div class="schedule-image-container">
                        {% if site_settings and site_settings.schedule_image %}
                            <img src="{{ site_settings.schedule_image.url }}" alt="{{ site_settings.schedule_title|default:'Schedule' }}" class="schedule-background-image">
                        {% else %}
                            <img src="{% static 'images/schedule-2025.png' %}" alt="2025 Schedule" class="schedule-background-image">
                        {% endif %}
                    </div>
                </div>

                <!-- Right Column - Content -->
                <div class="col-lg-6">
                    <div class="schedule-content">
                        <h2 class="schedule-heading">
                            {% if schedule_title %}
                                {{ schedule_title }}
                            {% elif site_settings %}
                                {% get_current_language as CURRENT_LANG %}
                                {% if CURRENT_LANG == 'es' %}
                                    {{ site_settings.schedule_title_es|default:site_settings.schedule_title_en }}
                                {% else %}
                                    {{ site_settings.schedule_title_en|default:"2026 EVENT CALENDAR" }}
                                {% endif %}
                            {% else %}
                                {% trans "2026 EVENT CALENDAR" %}
                            {% endif %}
                        </h2>
                        <h3 class="schedule-subheading">
                            {% if schedule_subtitle %}
                                {{ schedule_subtitle }}
                            {% elif site_settings %}
                                {% if site_settings.get_schedule_subtitle %}{{ site_settings.get_schedule_subtitle }}{% else %}REGIONAL EXPANSION AND NEW NATIONAL AND REGIONAL CHAMPIONSHIPS FOR 2026{% endif %}
                            {% else %}
                                {% trans "REGIONAL EXPANSION AND NEW NATIONAL AND REGIONAL CHAMPIONSHIPS FOR 2026" %}
                            {% endif %}
                        </h3>
                        <p class="schedule-description">
                            {% if schedule_description %}
                                {{ schedule_description }}
                            {% elif site_settings %}
                                {% if site_settings.get_schedule_description %}{{ site_settings.get_schedule_description }}{% endif %}
                            {% else %}
                                {% blocktrans %}As we move forward into 2026, NCS International continues to elevate its tournament and showcase platform. With a regional presence expansion for ages 7U-18U, new and improved National and Regional Championship events, and an even broader showcase schedule across the country, NCS remains dedicated to providing the highest standard of competition and experience for players, coaches and families alike.{% endblocktrans %}
                            {% endif %}
                        </p>
                        <div class="schedule-buttons">
                            {% if event_types %}
                                {% for event_type in event_types %}
                                    <a href="{% url 'events:public_list' %}?event_type={{ event_type.id }}" class="schedule-category-btn">
                                        {% if event_type.icon %}<i class="{{ event_type.icon }} me-2"></i>{% endif %}
                                        {{ event_type.name }}
                                    </a>
                                {% endfor %}
                            {% else %}
                                <a href="{% url 'events:public_list' %}" class="schedule-category-btn">{% trans "NCS CALENDAR" %}</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Events News Style Section -->
    <div class="events-news-section">
        <div class="events-news-header">
            <h2 class="events-news-title">{% trans "EVENTS" %}</h2>
            <a href="/events/" class="events-view-all-btn">{% trans "VIEW ALL" %}</a>
        </div>
        <div class="events-news-grid">
            {% for event in upcoming_events|slice:":4" %}
                <a href="{% url 'events:public_detail' event.pk %}" class="event-news-card">
                    <div class="event-news-image">
                        {% if event.logo %}
                            <img src="{{ event.logo }}" alt="{{ event.title }}" onerror="this.onerror=null; this.style.display='none'; this.parentElement.innerHTML='<div class=\'event-news-placeholder\'><i class=\'fas fa-baseball-ball\'></i></div>';">
                        {% else %}
                            <div class="event-news-placeholder">
                                <i class="fas fa-baseball-ball"></i>
                            </div>
                        {% endif %}
                        <div class="event-news-overlay">
                            {% if event.start_date %}
                                <div class="event-news-date">{{ event.start_date|date:"d M Y"|upper }}</div>
                            {% endif %}
                            {% if event.event_type %}
                                <div class="event-news-type" style="position: absolute; top: 10px; right: 10px; background: var(--mlb-red); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                    {{ event.event_type.name|upper }}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="event-news-content">
                        <div class="event-news-content-inner">
                            <h3 class="event-news-title-card">{{ event.title|upper|truncatewords:10 }}</h3>
                            {% if event.city or event.start_date %}
                                <div class="event-news-meta">
                                    {% if event.city %}
                                        <div class="event-news-meta-item">
                                            <i class="fas fa-map-marker-alt"></i>
                                            <span>{{ event.city.name }}{% if event.state %}, {{ event.state.name }}{% endif %}</span>
                                        </div>
                                    {% endif %}
                                    {% if event.start_date %}
                                        <div class="event-news-meta-item">
                                            <i class="fas fa-calendar-alt"></i>
                                            <span>{{ event.start_date|date:"d M Y" }}</span>
                                        </div>
                                    {% endif %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </a>
            {% endfor %}
            {% if upcoming_events|length == 0 %}
                {% for i in "1234" %}
                    <div class="event-news-card">
                        <div class="event-news-image">
                            <div class="event-news-placeholder">
                                <i class="fas fa-baseball-ball"></i>
                            </div>
                        </div>
                        <div class="event-news-content">
                            <div class="event-news-content-inner">
                                <h3 class="event-news-title-card">{% trans "COMING SOON" %}</h3>
                                <div class="event-news-meta">
                                    <div class="event-news-meta-item">
                                        <i class="fas fa-clock"></i>
                                        <span>{% trans "Very soon" %}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% elif upcoming_events|length == 1 %}
                {% for i in "123" %}
                    <div class="event-news-card">
                        <div class="event-news-image">
                            <div class="event-news-placeholder">
                                <i class="fas fa-baseball-ball"></i>
                            </div>
                        </div>
                        <div class="event-news-content">
                            <div class="event-news-content-inner">
                                <h3 class="event-news-title-card">{% trans "COMING SOON" %}</h3>
                                <div class="event-news-meta">
                                    <div class="event-news-meta-item">
                                        <i class="fas fa-clock"></i>
                                        <span>{% trans "Very soon" %}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% elif upcoming_events|length == 2 %}
                {% for i in "12" %}
                    <div class="event-news-card">
                        <div class="event-news-image">
                            <div class="event-news-placeholder">
                                <i class="fas fa-baseball-ball"></i>
                            </div>
                        </div>
                        <div class="event-news-content">
                            <div class="event-news-content-inner">
                                <h3 class="event-news-title-card">{% trans "COMING SOON" %}</h3>
                                <div class="event-news-meta">
                                    <div class="event-news-meta-item">
                                        <i class="fas fa-clock"></i>
                                        <span>{% trans "Very soon" %}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% elif upcoming_events|length == 3 %}
                <div class="event-news-card">
                    <div class="event-news-image">
                        <div class="event-news-placeholder">
                            <i class="fas fa-baseball-ball"></i>
                        </div>
                    </div>
                    <div class="event-news-content">
                        <div class="event-news-content-inner">
                            <h3 class="event-news-title-card">{% trans "COMING SOON" %}</h3>
                            <div class="event-news-meta">
                                <div class="event-news-meta-item">
                                    <i class="fas fa-clock"></i>
                                    <span>{% trans "Very soon" %}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Showcases and Prospect Gateways Section -->
    <div class="schedule-section-card mb-5">
        <div class="container-fluid px-0">
            <div class="row g-0">
                <!-- Left Column - Image -->
                <div class="col-lg-6">
                    <div class="schedule-image-container">
                        {% if site_settings and site_settings.showcase_image %}
                            <img src="{{ site_settings.showcase_image.url }}" alt="{{ site_settings.showcase_title|default:'Showcase' }}" class="schedule-background-image">
                        {% else %}
                            <img src="{% static 'images/showcase-player.webp' %}" alt="Showcase Player" class="schedule-background-image">
                        {% endif %}
                        <div class="showcase-overlay">
                            <div class="showcase-oval">
                                <span class="showcase-text">SHOWCASE</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Content -->
                <div class="col-lg-6">
                    <div class="schedule-content">
                        <h2 class="schedule-heading">
                            {% if showcase_title %}
                                {{ showcase_title }}
                            {% elif site_settings %}
                                {% if site_settings.get_showcase_title %}{{ site_settings.get_showcase_title }}{% else %}SHOWCASES AND PROSPECT GATEWAYS{% endif %}
                            {% else %}
                                {% trans "SHOWCASES AND PROSPECT GATEWAYS" %}
                            {% endif %}
                        </h2>
                        <h3 class="schedule-subheading">
                            {% if showcase_subtitle %}
                                {{ showcase_subtitle }}
                            {% elif site_settings %}
                                {% if site_settings.get_showcase_subtitle %}{{ site_settings.get_showcase_subtitle }}{% else %}REGIONAL AND NATIONAL SHOWCASES{% endif %}
                            {% else %}
                                {% trans "REGIONAL AND NATIONAL SHOWCASES" %}
                            {% endif %}
                        </h3>
                        <p class="schedule-description">
                            {% if showcase_description %}
                                {{ showcase_description }}
                            {% elif site_settings %}
                                {% if site_settings.get_showcase_description %}{{ site_settings.get_showcase_description }}{% endif %}
                            {% else %}
                                {% blocktrans %}Perfect Game is thrilled to offer showcases (HS) and Prospect Gateways (13U/14U) across the country for the 2025 calendar. This includes regional events for all ages and new invite only events! PG strives to delivery the very best events and experience for all players, coaches and families across the country.{% endblocktrans %}
                            {% endif %}
                        </p>
                        <div class="schedule-buttons">
                            {% if showcase_event_type %}
                                <a href="{% url 'events:public_list' %}?event_type={{ showcase_event_type.id }}" class="schedule-category-btn">{% trans "SHOWCASES" %}</a>
                            {% else %}
                                <a href="{% url 'events:public_list' %}?search=showcase" class="schedule-category-btn">{% trans "SHOWCASES" %}</a>
                            {% endif %}
                            {% if prospect_event_type %}
                                <a href="{% url 'events:public_list' %}?event_type={{ prospect_event_type.id }}" class="schedule-category-btn">{% trans "PROSPECT GAMES" %}</a>
                            {% else %}
                                <a href="{% url 'events:public_list' %}?search=prospect" class="schedule-category-btn">{% trans "PROSPECT GAMES" %}</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sponsors Section -->
    <section class="sponsors-section">
        <div class="container">
            <h2 class="sponsors-title" data-i18n="SPONSORS">{% trans "SPONSORS" %}</h2>
            <div class="sponsors-grid">
                {% if sponsors %}
                    {% for sponsor in sponsors %}
                        <div class="sponsor-card">
                            {% if sponsor.website_url %}
                                <a href="{{ sponsor.website_url }}" target="_blank" rel="noopener noreferrer" style="display: block; width: 100%; height: 100%;">
                                    <img src="{{ sponsor.logo.url }}" alt="{{ sponsor.name }}">
                                </a>
                            {% else %}
                                <img src="{{ sponsor.logo.url }}" alt="{{ sponsor.name }}">
                            {% endif %}
                        </div>
                    {% endfor %}
                {% else %}
                    <!-- Fallback: Sponsors por defecto si no hay sponsors -->
                    <div class="sponsor-card">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='320' height='140'><rect width='100%' height='100%' rx='12' fill='%23D72638'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' fill='%23ffffff' font-size='32' font-family='Arial' font-weight='700'>LOGO 1</text></svg>" alt="Sponsor 1">
                    </div>
                    <div class="sponsor-card">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='320' height='140'><rect width='100%' height='100%' rx='12' fill='%23007BFF'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' fill='%23ffffff' font-size='32' font-family='Arial' font-weight='700'>LOGO 2</text></svg>" alt="Sponsor 2">
                    </div>
                    <div class="sponsor-card">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='320' height='140'><rect width='100%' height='100%' rx='12' fill='%23F59E0B'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' fill='%230f172a' font-size='32' font-family='Arial' font-weight='700'>LOGO 3</text></svg>" alt="Sponsor 3">
                    </div>
                    <div class="sponsor-card">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='320' height='140'><rect width='100%' height='100%' rx='12' fill='%2310B981'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' fill='%230f172a' font-size='32' font-family='Arial' font-weight='700'>LOGO 4</text></svg>" alt="Sponsor 4">
                    </div>
                    <div class="sponsor-card">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='320' height='140'><rect width='100%' height='100%' rx='12' fill='%239C27B0'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' fill='%23ffffff' font-size='32' font-family='Arial' font-weight='700'>LOGO 5</text></svg>" alt="Sponsor 5">
                    </div>
                    <div class="sponsor-card">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='320' height='140'><rect width='100%' height='100%' rx='12' fill='%23264870'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' fill='%23ffffff' font-size='32' font-family='Arial' font-weight='700'>LOGO 6</text></svg>" alt="Sponsor 6">
                    </div>
                {% endif %}
            </div>
        </div>
    </section>

    <!-- Instagram Style Gallery Section -->
    <section class="instagram-gallery-section">
        <div class="instagram-gallery-header">
            <h2 data-i18n="Follow us on Instagram"><i class="fab fa-instagram"></i> {% trans "Follow us on Instagram" %}</h2>
            <a href="https://www.instagram.com/{{ instagram_username }}/" target="_blank" rel="noopener noreferrer" class="instagram-follow-link">
                @{{ instagram_username }}
            </a>
        </div>
        <div class="instagram-gallery-container">
            <div class="instagram-gallery-grid" id="instagram-feed">
                <!-- Placeholders iniciales - serán reemplazados por posts de Instagram -->
                {% for i in "123456" %}
                    <div class="instagram-gallery-item">
                        <div class="instagram-gallery-placeholder">
                            <i class="fab fa-instagram"></i>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <script>
        // Instagram Feed Loader - Carga inmediatamente al renderizar
        (function() {
            const instagramUsername = '{{ instagram_username }}';
            const grid = document.getElementById('instagram-feed');

            // Limpiar el grid inmediatamente para evitar mostrar contenido inicial
            if (grid) {
                grid.innerHTML = '';
            }

            // Función para cargar posts de Instagram
            async function loadInstagramPosts() {
                if (!grid) return;

                try {
                    // Intentar con nuestra API personalizada
                    const response = await fetch('/accounts/api/instagram/posts/');
                    if (response.ok) {
                        const posts = await response.json();
                        console.log('Posts recibidos de API:', posts.length);
                        if (posts && posts.length > 0) {
                            console.log('Renderizando posts de Instagram');
                            renderInstagramPosts(posts);
                            return;
                        }
                    }
                } catch (error) {
                    console.log('Error con API personalizada:', error);
                }

                // Si no hay posts, mostrar placeholders de Instagram
                console.log('No se pudieron cargar posts de Instagram, mostrando placeholders');
                showPlaceholders();
            }

            // Función para mostrar placeholders
            function showPlaceholders() {
                if (!grid) return;
                grid.innerHTML = '';
                for (let i = 0; i < 6; i++) {
                    const item = document.createElement('div');
                    item.className = 'instagram-gallery-item';
                    const placeholder = document.createElement('div');
                    placeholder.className = 'instagram-gallery-placeholder';
                    placeholder.innerHTML = '<i class="fab fa-instagram"></i>';
                    item.appendChild(placeholder);
                    grid.appendChild(item);
                }
            }

            // Función para renderizar posts de Instagram (solo 6 posts)
            function renderInstagramPosts(posts) {
                if (!grid) return;

                grid.innerHTML = '';

                // Renderizar solo los posts disponibles (máximo 6)
                const postsToRender = posts.slice(0, 6);

                postsToRender.forEach(post => {
                    const item = document.createElement('a');
                    item.href = post.permalink || `https://www.instagram.com/${instagramUsername}/`;
                    item.target = '_blank';
                    item.rel = 'noopener noreferrer';
                    item.className = 'instagram-gallery-item';

                    if (post.image_url) {
                        const img = document.createElement('img');
                        img.src = post.image_url;
                        img.alt = post.caption || 'Instagram post';
                        img.loading = 'lazy'; // Lazy loading para mejor rendimiento
                        img.onerror = function() {
                            // Si la imagen falla, mostrar placeholder
                            this.style.display = 'none';
                            const placeholder = document.createElement('div');
                            placeholder.className = 'instagram-gallery-placeholder';
                            placeholder.innerHTML = '<i class="fab fa-instagram"></i>';
                            item.appendChild(placeholder);
                        };
                        item.appendChild(img);
                    } else {
                        const placeholder = document.createElement('div');
                        placeholder.className = 'instagram-gallery-placeholder';
                        placeholder.innerHTML = '<i class="fab fa-instagram"></i>';
                        item.appendChild(placeholder);
                    }

                    grid.appendChild(item);
                });

                console.log(`Renderizados ${postsToRender.length} posts de Instagram`);
            }

            // Cargar posts inmediatamente (no esperar DOMContentLoaded)
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', loadInstagramPosts);
            } else {
                // DOM ya está listo
                loadInstagramPosts();
            }
        })();
    </script>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container-fluid px-4">
            <div style="max-width: 1200px; margin: 0 auto;">
            <h2 data-i18n="Get Started Today">{% trans "Get Started Today" %}</h2>
            <p data-i18n="Create a Profile • Player Profile • Team Profile • Register for Events">{% trans "Create a Profile • Player Profile • Team Profile • Register for Events" %}</p>
            {% if not user.is_authenticated %}
                <a href="#" class="btn btn-mlb me-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                    <i class="fas fa-sign-in-alt me-2"></i>{% trans "Log In" %}
                </a>
                <a href="/accounts/register/" class="btn btn-mlb-outline">
                    <i class="fas fa-user-plus me-2"></i>{% trans "Sign Up" %}
                </a>
            {% else %}
                <a href="{% url 'panel' %}" class="btn btn-mlb">
                    <i class="fas fa-tachometer-alt me-2"></i>{% trans "Go to My Account" %}
                </a>
            {% endif %}
            </div>
        </div>
    </section>

    <!-- Footer MLB -->
    {% include 'includes/footer_mlb.html' %}

    <!-- Login Modal -->
    <div class="modal fade modal-mlb" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="login-icon-modal">
                        <i class="fas fa-baseball-ball"></i>
                    </div>
                    <h5 class="modal-title" id="loginModalLabel">{% trans "Log In" %}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="{% trans 'Close' %}"></button>
                </div>
                <div class="modal-body">
                    <p class="text-center mb-4" style="color: #666; position: relative; z-index: 1;">{% trans "Access your NCS International account" %}</p>

                    <form method="post" action="{% url 'accounts:login' %}">
                        {% csrf_token %}
                        <input type="hidden" name="next" value="{% if request.GET.next %}{{ request.GET.next }}{% else %}{{ request.path }}{% endif %}">

                        {% if form.non_field_errors %}
                            <div class="error-message">
                                <i class="fas fa-exclamation-circle me-2"></i>
                                {{ form.non_field_errors.0 }}
                            </div>
                        {% elif show_login_modal %}
                            <div class="error-message">
                                <i class="fas fa-exclamation-circle me-2"></i>
                                {% trans "Please verify your credentials and try again." %}
                            </div>
                        {% endif %}

                        <div class="mb-3">
                            <label for="id_username_modal" class="form-label">
                                <i class="fas fa-envelope me-1"></i>{% trans "Email" %}
                            </label>
                            <input type="email"
                                   id="id_username_modal"
                                   name="username"
                                   class="form-control {% if form.username.errors %}is-invalid{% endif %}"
                                   placeholder="{% trans 'your@email.com' %}"
                                   value="{% if form.username.value %}{{ form.username.value }}{% elif request.POST.username %}{{ request.POST.username }}{% endif %}"
                                   required
                                   autofocus>
                            {% if form.username.errors %}
                                <div class="field-error">{{ form.username.errors.0 }}</div>
                            {% endif %}
                        </div>

                        <div class="mb-3">
                            <label for="id_password_modal" class="form-label">
                                <i class="fas fa-lock me-1"></i>{% trans "Password" %}
                            </label>
                            <input type="password"
                                   id="id_password_modal"
                                   name="password"
                                   class="form-control {% if form.password.errors %}is-invalid{% endif %}"
                                   placeholder="{% trans 'Enter your password' %}"
                                   required>
                            {% if form.password.errors %}
                                <div class="field-error">{{ form.password.errors.0 }}</div>
                            {% endif %}
                        </div>

                        <div class="mb-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="remember_me" id="remember_me_modal">
                                <label class="form-check-label" for="remember_me_modal">
                                    {% trans "Remember me" %}
                                </label>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-mlb w-100">
                            <i class="fas fa-sign-in-alt me-2"></i>{% trans "Log In" %}
                        </button>
                    </form>
                </div>
                <div class="modal-footer">
                    <p class="mb-0 w-100">
                        {% blocktrans %}Don't have an account? <a href="/accounts/register/">Sign up here</a>{% endblocktrans %}
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Sistema moderno de traducciones del lado del cliente -->
    <script src="{% static 'js/i18n.js' %}"></script>

    <!-- Pasar traducciones de la base de datos al JavaScript -->
    {% if site_settings_translations %}
    {{ site_settings_translations|json_script:"site-settings-translations" }}
    <script>
        // Inyectar traducciones de la base de datos en el sistema i18n ANTES de aplicar traducciones
        // Esto asegura que las traducciones de la BD tengan prioridad
        (function() {
            const translationsElement = document.getElementById('site-settings-translations');
            if (translationsElement) {
                try {
                    const dbTranslations = JSON.parse(translationsElement.textContent);
                    // Si i18nManager ya existe, fusionar las traducciones
                    if (window.i18nManager && window.i18nManager.translations) {
                        Object.keys(dbTranslations).forEach(lang => {
                            if (window.i18nManager.translations[lang]) {
                                // Las traducciones de la BD tienen prioridad
                                window.i18nManager.translations[lang] = {
                                    ...window.i18nManager.translations[lang],
                                    ...dbTranslations[lang]
                                };
                            } else {
                                window.i18nManager.translations[lang] = dbTranslations[lang];
                            }
                        });
                        // Re-aplicar traducciones con los nuevos valores de la BD
                        window.i18nManager.applyTranslations();
                    } else {
                        // Si i18nManager aún no existe, guardar las traducciones para cuando se cree
                        window._dbTranslations = dbTranslations;
                    }
                } catch (e) {
                    console.error('Error loading translations from database:', e);
                }
            }
        })();
    </script>
    {% endif %}

    <script>
        // Mostrar toast cuando se hace logout
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('logout') === 'success') {
                // Crear y mostrar toast de logout exitoso
                const toastContainer = document.createElement('div');
                toastContainer.className = 'toast-container position-fixed top-0 end-0 p-3';
                toastContainer.style.zIndex = '9999';
                document.body.appendChild(toastContainer);

                const toastEl = document.createElement('div');
                toastEl.className = 'toast show';
                toastEl.setAttribute('role', 'alert');
                toastEl.setAttribute('aria-live', 'assertive');
                toastEl.setAttribute('aria-atomic', 'true');
                toastEl.style.minWidth = '300px';

                toastEl.innerHTML = `
                    <div class="toast-header bg-success text-white">
                        <i class="fas fa-check-circle me-2"></i>
                        <strong class="me-auto">{% trans "Success" %}</strong>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        <i class="fas fa-sign-out-alt me-2 text-success"></i>
                        {% trans "You have been successfully logged out." %}
                    </div>
                `;

                toastContainer.appendChild(toastEl);

                // Inicializar toast de Bootstrap
                const toast = new bootstrap.Toast(toastEl, {
                    autohide: true,
                    delay: 5000
                });
                toast.show();

                // Limpiar después de que se oculte
                toastEl.addEventListener('hidden.bs.toast', function() {
                    toastContainer.remove();
                });

                // Limpiar el parámetro de la URL sin recargar la página
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        });

        // Inicializar el carousel del hero slider
        document.addEventListener('DOMContentLoaded', function() {
            const heroSlider = document.getElementById('heroSlider');
            if (heroSlider) {
                const carousel = new bootstrap.Carousel(heroSlider, {
                    interval: 5000,
                    ride: 'carousel',
                    pause: 'hover',
                    wrap: true
                });
            }
        });

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]:not([data-bs-toggle])').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (href !== '#' && href.startsWith('#')) {
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });

        // Mostrar modal de login si hay errores en la URL o si show_login_modal está activo
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const loginError = urlParams.get('login_error');
            const loginModal = document.getElementById('loginModal');
            const showLoginModal = {% if show_login_modal %}true{% else %}false{% endif %};

            if ((loginError === '1' || showLoginModal) && loginModal) {
                const modal = new bootstrap.Modal(loginModal);
                modal.show();

                // Limpiar el parámetro de la URL sin recargar
                if (loginError === '1') {
                    const newUrl = window.location.pathname;
                    window.history.replaceState({}, '', newUrl);
                }
            }
        });

        // Manejar envío del formulario del modal
        const loginForm = document.querySelector('#loginModal form');
        if (loginForm) {
            loginForm.addEventListener('submit', function(e) {
                // Si el formulario se envía, el servidor manejará la redirección
                // No necesitamos prevenir el submit predeterminado
            });
        }

        // Video Promo Carousel - Cambio automático de videos
        (function() {
            const eventsDataScript = document.getElementById('promoEventsData');
            if (!eventsDataScript) return;

            let eventsData;
            try {
                eventsData = JSON.parse(eventsDataScript.textContent);
            } catch (e) {
                console.error('Error al parsear promoEventsData:', e);
                console.error('Contenido del script:', eventsDataScript.textContent.substring(0, 500));
                return;
            }

            const events = eventsData.events || [];
            console.log('Eventos parseados:', events.length, 'eventos');
            if (events.length > 0) {
                console.log('Primer evento:', events[0]);
            }

            if (events.length === 0) {
                console.warn('No hay eventos disponibles');
                return;
            }

            const video = document.getElementById('videoPromoPlayer');
            if (!video) return;

            let currentIndex = 0;
            let hls = null;

            // Función para convertir URL de YouTube/Vimeo a formato directo si es necesario
            function getVideoSource(videoUrl) {
                if (!videoUrl) return null;

                // Si es una URL directa de video (incluyendo videos del sistema multimedia), usarla directamente
                if (videoUrl.match(/\.(mp4|webm|ogg|m3u8)$/i) || videoUrl.includes('/multimedia/') || videoUrl.includes('/media/')) {
                    return videoUrl;
                }
                // Si es YouTube, convertir a formato embed
                const youtubeMatch = videoUrl.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
                if (youtubeMatch) {
                    return `https://www.youtube.com/embed/${youtubeMatch[1]}?autoplay=1&mute=1&loop=1&playlist=${youtubeMatch[1]}`;
                }
                // Si es Vimeo, convertir a formato embed
                const vimeoMatch = videoUrl.match(/vimeo\.com\/(?:.*\/)?(\d+)/);
                if (vimeoMatch) {
                    return `https://player.vimeo.com/video/${vimeoMatch[1]}?autoplay=1&mute=1&loop=1`;
                }
                return videoUrl;
            }

            // Función para cargar un video
            function loadVideo(event) {
                if (!event) {
                    // Si no hay evento, pasar al siguiente
                    if (events.length > 1) {
                        setTimeout(nextVideo, 1000);
                    }
                    return;
                }

                // Actualizar información del evento PRIMERO (antes de cargar el video)
                updateEventInfo(event);

                // Si no hay video_url, pasar al siguiente evento
                if (!event.video_url) {
                    if (events.length > 1) {
                        setTimeout(nextVideo, 1000);
                    }
                    return;
                }

                // Limpiar HLS anterior si existe
                if (hls) {
                    hls.destroy();
                    hls = null;
                }

                // Limpiar sources anteriores y remover listeners
                video.innerHTML = '';
                // Remover listener anterior si existe
                const oldEndedHandler = video._endedHandler;
                if (oldEndedHandler) {
                    video.removeEventListener('ended', oldEndedHandler);
                }
                // Reiniciar la barra de progreso
                const progressBar = document.getElementById('videoPromoProgressBarInner');
                if (progressBar) {
                    progressBar.style.width = '0%';
                }

                const videoUrl = event.video_url;
                console.log('Cargando video para evento:', event.title, 'URL:', videoUrl);

                if (!videoUrl) {
                    console.warn('No hay video_url para el evento:', event.title);
                    if (events.length > 1) {
                        setTimeout(nextVideo, 1000);
                    }
                    return;
                }

                const videoSource = getVideoSource(videoUrl);
                console.log('Video source procesado:', videoSource);

                if (!videoSource) {
                    console.warn('No se pudo procesar la URL del video:', videoUrl);
                    if (events.length > 1) {
                        setTimeout(nextVideo, 1000);
                    }
                    return;
                }

                // Si es YouTube o Vimeo, usar iframe
                if (videoSource.includes('youtube.com/embed') || videoSource.includes('vimeo.com/video')) {
                    // Para YouTube/Vimeo, usamos un iframe
                    const iframe = document.createElement('iframe');
                    iframe.id = 'videoPromoIframe';
                    iframe.src = videoSource;
                    iframe.style.width = '100%';
                    iframe.style.height = '100%';
                    iframe.style.border = 'none';
                    iframe.style.position = 'absolute';
                    iframe.style.top = '0';
                    iframe.style.left = '0';
                    iframe.allow = 'autoplay; encrypted-media';
                    iframe.allowFullscreen = true;

                    // Ocultar el video y mostrar el iframe
                    video.style.display = 'none';
                    const videoContainer = video.parentElement;
                    if (videoContainer) {
                        // Remover iframe anterior si existe
                        const oldIframe = document.getElementById('videoPromoIframe');
                        if (oldIframe) oldIframe.remove();
                        videoContainer.appendChild(iframe);
                    }

                    // Para YouTube/Vimeo, usar postMessage API para detectar cuando termina
                    // Si no está disponible, usar un timeout más largo (60 segundos)
                    let timeoutId = setTimeout(() => {
                        nextVideo();
                    }, 60000); // 60 segundos como fallback

                    // Intentar detectar cuando termina el video de YouTube/Vimeo
                    if (iframe.contentWindow) {
                        // Escuchar mensajes del iframe (si el video soporta postMessage)
                        window.addEventListener('message', function onMessage(e) {
                            if (e.data === 'ended' || e.data === 'video-ended') {
                                clearTimeout(timeoutId);
                                window.removeEventListener('message', onMessage);
                                nextVideo();
                            }
                        });
                    }
                } else {
                    // Es un video directo - mostrar el video y ocultar iframe si existe
                    video.style.display = 'block';
                    const oldIframe = document.getElementById('videoPromoIframe');
                    if (oldIframe) oldIframe.remove();

                    // Definir handler para cuando termine el video (antes de usarlo)
                    const endedHandler = function() {
                        console.log('Video terminado, cambiando al siguiente evento');
                        nextVideo();
                    };
                    // Guardar referencia para poder removerlo después si es necesario
                    video._endedHandler = endedHandler;

                    // Es un video directo
                    console.log('Cargando video directo:', videoSource);
                    const source = document.createElement('source');
                    source.src = videoSource;

                    // Detectar tipo de video
                    if (videoSource.includes('.m3u8')) {
                        source.type = 'application/x-mpegURL';
                    } else if (videoSource.includes('.mp4')) {
                        source.type = 'video/mp4';
                    } else if (videoSource.includes('.webm')) {
                        source.type = 'video/webm';
                    } else {
                        // Si no tiene extensión, intentar detectar desde la URL
                        source.type = 'video/mp4'; // Por defecto MP4
                    }

                    video.appendChild(source);
                    video.appendChild(document.createTextNode('{% filter escapejs %}{% trans "Your browser does not support video playback." %}{% endfilter %}'));

                    // Agregar listeners para debugging
                    video.addEventListener('loadedmetadata', function() {
                        console.log('Video metadata cargado, duración:', video.duration);
                    }, { once: true });

                    video.addEventListener('canplay', function() {
                        console.log('Video puede reproducirse');
                    }, { once: true });

                    video.addEventListener('error', function(e) {
                        console.error('Error en el video:', e);
                        console.error('Video error code:', video.error ? video.error.code : 'unknown');
                        console.error('Video error message:', video.error ? video.error.message : 'unknown');
                        console.error('Video src:', video.currentSrc);
                    }, { once: true });

                    // Agregar listener para cuando termine el video
                    video.addEventListener('ended', endedHandler);

                    // Agregar listener para actualizar la barra de progreso
                    const progressBar = document.getElementById('videoPromoProgressBarInner');
                    video.addEventListener('timeupdate', function() {
                        if (progressBar && video.duration) {
                            const progress = (video.currentTime / video.duration) * 100;
                            progressBar.style.width = progress + '%';
                        }
                    });

                    // Reiniciar la barra de progreso cuando el video se carga
                    video.addEventListener('loadedmetadata', function() {
                        if (progressBar) {
                            progressBar.style.width = '0%';
                        }
                    }, { once: true });

                    // Si es HLS y el navegador no lo soporta nativamente, usar hls.js
                    if (videoSource.includes('.m3u8') && video.canPlayType('application/vnd.apple.mpegurl') === '') {
                        if (typeof Hls !== 'undefined') {
                            hls = new Hls();
                            hls.loadSource(videoSource);
                            hls.attachMedia(video);
                            hls.on(Hls.Events.MANIFEST_PARSED, function() {
                                video.play().catch(() => {});
                            });
                            // Asegurar que el listener 'ended' esté activo para HLS
                            video.addEventListener('ended', endedHandler);
                            hls.on(Hls.Events.ERROR, function(event, data) {
                                if (data.fatal) {
                                    // Si hay error fatal, pasar al siguiente video
                                    setTimeout(nextVideo, 2000);
                                }
                            });
                        } else {
                            const script = document.createElement('script');
                            script.src = 'https://cdn.jsdelivr.net/npm/hls.js@latest';
                            script.onload = function() {
                                hls = new Hls();
                                hls.loadSource(videoSource);
                                hls.attachMedia(video);
                                hls.on(Hls.Events.MANIFEST_PARSED, function() {
                                    video.play().catch(() => {});
                                });
                                // Asegurar que el listener 'ended' esté activo para HLS
                                video.addEventListener('ended', endedHandler);
                                hls.on(Hls.Events.ERROR, function(event, data) {
                                    if (data.fatal) {
                                        setTimeout(nextVideo, 2000);
                                    }
                                });
                            };
                            document.head.appendChild(script);
                        }
                    } else {
                        console.log('Cargando video sin HLS');
                        video.load();
                        // Esperar a que el video esté listo antes de reproducir
                        video.addEventListener('canplaythrough', function() {
                            console.log('Video listo para reproducir completamente');
                            video.play().then(() => {
                                console.log('Video reproducido exitosamente');
                            }).catch((error) => {
                                console.error('Error playing video:', error);
                                setTimeout(nextVideo, 2000);
                            });
                        }, { once: true });

                        // Fallback: intentar reproducir después de un tiempo si canplaythrough no se dispara
                        setTimeout(() => {
                            if (video.readyState >= 2) { // HAVE_CURRENT_DATA
                                console.log('Intentando reproducir video (fallback)');
                                video.play().then(() => {
                                    console.log('Video reproducido exitosamente (fallback)');
                                }).catch((error) => {
                                    console.error('Error playing video (fallback):', error);
                                    setTimeout(nextVideo, 2000);
                                });
                            } else {
                                console.warn('Video no está listo, readyState:', video.readyState);
                            }
                        }, 2000);
                    }

                    // También escuchar errores del video
                    video.addEventListener('error', function() {
                        console.error('Video error, moving to next');
                        setTimeout(nextVideo, 2000);
                    }, { once: true });
                }
            }

            // Función para actualizar la información del evento
            function updateEventInfo(event) {
                if (!event) return;

                const titleEl = document.getElementById('promoTitleMain');
                const descEl = document.getElementById('promoDescription');
                const locationEl = document.getElementById('promoLocation');
                const typeEl = document.getElementById('promoType');
                const typeLinkEl = document.getElementById('promoTypeLink');
                const linkEl = document.getElementById('promoEventLink');

                if (titleEl) {
                    titleEl.textContent = (event.title || '{% filter escapejs %}{% trans "Event" %}{% endfilter %}').toUpperCase();
                }
                if (descEl) {
                    descEl.innerHTML = event.description || '{% filter escapejs %}{% trans "Experience NCS International events" %}{% endfilter %}';
                }
                if (locationEl) {
                    locationEl.textContent = event.location || '-';
                }
                if (typeEl) {
                    typeEl.textContent = event.event_type || '{% filter escapejs %}{% trans "Tournament / Showcase" %}{% endfilter %}';
                }
                if (typeLinkEl && event.event_type_id) {
                    typeLinkEl.href = '{% url "events:public_list" %}?event_type=' + event.event_type_id;
                } else if (typeLinkEl && event.event_type) {
                    // Si no hay ID, usar búsqueda por texto
                    typeLinkEl.href = '{% url "events:public_list" %}?search=' + encodeURIComponent(event.event_type.toLowerCase());
                }
                if (linkEl) {
                    linkEl.href = event.detail_url || '#';
                }
            }

            // Función para cambiar al siguiente video
            function nextVideo() {
                if (events.length === 0) return;

                // Avanzar al siguiente índice (con loop)
                currentIndex = (currentIndex + 1) % events.length;

                // Cargar el siguiente video
                const nextEvent = events[currentIndex];
                if (nextEvent) {
                    loadVideo(nextEvent);
                }
            }

            // Cargar el primer video al iniciar
            if (events.length > 0) {
                console.log('Iniciando carga del primer video');
                console.log('Primer evento completo:', events[0]);
                loadVideo(events[0]);
            } else {
                console.warn('No hay eventos con videos disponibles');
                // Si no hay eventos, mostrar mensaje
                updateEventInfo({
                    title: '{% filter escapejs %}{% trans "No videos available" %}{% endfilter %}',
                    description: '{% filter escapejs %}{% trans "Check back soon for upcoming events" %}{% endfilter %}',
                    location: '-',
                    event_type: '-',
                    divisions: '-',
                    detail_url: '#'
                });
            }
        })();

        // Audio enablement (autoplay with sound is blocked by browsers)
        (function() {
            const video = document.querySelector('.video-promo-video');
            const btn = document.querySelector('.video-audio-toggle');
            if (!video || !btn) return;
            let audioUnlocked = false;

            function render() {
                const icon = btn.querySelector('i');
                if (!icon) return;
                if (video.muted || video.volume === 0) {
                    icon.className = 'fas fa-volume-mute';
                    btn.title = btn.dataset.titleEnable || 'Enable sound';
                } else {
                    icon.className = 'fas fa-volume-up';
                    btn.title = btn.dataset.titleMute || 'Mute';
                }
            }

            async function unmuteAndPlay() {
                video.muted = false;
                if (video.volume === 0) video.volume = 1;
                try { await video.play(); } catch (e) {}
                audioUnlocked = true;
                render();
            }

            btn.addEventListener('click', function(e) {
                e.preventDefault();
                if (video.muted || video.volume === 0) {
                    unmuteAndPlay();
                } else {
                    video.muted = true;
                    render();
                }
            });

            // Enable audio automatically on first user interaction (allowed by browsers)
            const once = { once: true, passive: true };
            const onFirstGesture = function() {
                if (video.muted || video.volume === 0) {
                    unmuteAndPlay();
                }
            };
            document.addEventListener('click', onFirstGesture, once);
            document.addEventListener('touchstart', onFirstGesture, once);
            document.addEventListener('keydown', onFirstGesture, once);

            // IMPORTANT: First click on the video should NOT toggle pause.
            // Some browsers toggle play/pause on click; we intercept only until audio is unlocked.
            video.addEventListener('click', function(e) {
                if (!audioUnlocked && (video.muted || video.volume === 0)) {
                    e.preventDefault();
                    e.stopPropagation();
                    unmuteAndPlay();
                }
            }, true);

            render();
        })();

        // Floating Video on Scroll
        (function() {
            const videoSection = document.querySelector('.video-promo-section');
            const video = document.querySelector('.video-promo-video');
            const inlineHost = document.getElementById('videoPromoInlineHost');

            if (!videoSection || !video || !inlineHost) return;

            // Create floating container (we move the SAME <video> here)
            const floatingContainer = document.createElement('div');
            floatingContainer.className = 'video-promo-floating';
            floatingContainer.innerHTML = `
                <button class="video-promo-floating-close" title="{% trans 'Close' %}">
                    <i class="fas fa-times"></i>
                </button>
                <div class="video-promo-floating-host"></div>
            `;
            document.body.appendChild(floatingContainer);

            const floatingHost = floatingContainer.querySelector('.video-promo-floating-host');
            const closeBtn = floatingContainer.querySelector('.video-promo-floating-close');

            let floatingDisabled = false;
            let isFloating = false;

            function moveToFloating() {
                if (floatingDisabled || isFloating) return;
                const wasPlaying = !video.paused && !video.ended;
                floatingHost.appendChild(video);
                floatingContainer.classList.add('active');
                isFloating = true;
                if (wasPlaying) {
                    video.play().catch(() => {});
                }
            }

            function moveToInline() {
                if (!isFloating) return;
                const wasPlaying = !video.paused && !video.ended;
                inlineHost.appendChild(video);
                floatingContainer.classList.remove('active');
                isFloating = false;
                if (wasPlaying) {
                    video.play().catch(() => {});
                }
            }

            closeBtn.addEventListener('click', function() {
                floatingDisabled = true;
                moveToInline();
                floatingContainer.classList.remove('active');
            });

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (!entry.isIntersecting) {
                        moveToFloating();
                    } else {
                        moveToInline();
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px'
            });

            observer.observe(videoSection);
        })();

        // Language Selector Dropdown
    </script>

    <!-- Messages Modal Container -->
    <div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" id="messageModalContent">
                <div class="modal-header" id="messageModalHeader">
                    <h5 class="modal-title" id="messageModalLabel">
                        <i class="fas fa-info-circle me-2" id="messageModalIcon"></i>
                        <span id="messageModalTitle">Notificación</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="messageModalBody">
                    <p id="messageModalText"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Aceptar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Messages (hidden, converted to modals) -->
    {% if messages %}
        <div class="messages-container" style="display: none;">
            {% for message in messages %}
                <div class="django-message" data-tag="{{ message.tags }}" data-message="{{ message|escapejs }}">
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <script>
        // Convert Django messages to Bootstrap modals
        document.addEventListener('DOMContentLoaded', function() {
            const messages = document.querySelectorAll('.django-message');
            let messageIndex = 0;

            function showMessageModal(message, tag) {
                const modalEl = document.getElementById('messageModal');
                const modalBody = document.getElementById('messageModalBody');
                const modalTitle = document.getElementById('messageModalTitle');
                const modalHeader = document.getElementById('messageModalHeader');
                const modalIcon = document.getElementById('messageModalIcon');
                const modalContent = document.getElementById('messageModalContent');

                if (!modalEl || !modalBody) return;

                // Set message text
                modalBody.querySelector('#messageModalText').textContent = message;

                // Map Django message tags to Bootstrap alert types
                let alertType = 'info';
                let iconClass = 'fa-info-circle';
                let title = 'Notificación';

                if (tag === 'success') {
                    alertType = 'success';
                    iconClass = 'fa-check-circle';
                    title = '¡Éxito!';
                } else if (tag === 'error' || tag === 'danger') {
                    alertType = 'danger';
                    iconClass = 'fa-exclamation-circle';
                    title = 'Error';
                } else if (tag === 'warning') {
                    alertType = 'warning';
                    iconClass = 'fa-exclamation-triangle';
                    title = 'Advertencia';
                } else if (tag === 'info') {
                    alertType = 'info';
                    iconClass = 'fa-info-circle';
                    title = 'Información';
                }

                // Update modal styling
                modalTitle.textContent = title;
                modalIcon.className = `fas ${iconClass} me-2`;

                // Remove previous alert classes
                modalHeader.classList.remove('bg-success', 'bg-danger', 'bg-warning', 'bg-info', 'text-white');
                modalContent.classList.remove('border-success', 'border-danger', 'border-warning', 'border-info');

                // Add new alert classes
                if (alertType === 'success') {
                    modalHeader.classList.add('bg-success', 'text-white');
                    modalContent.classList.add('border-success');
                } else if (alertType === 'danger') {
                    modalHeader.classList.add('bg-danger', 'text-white');
                    modalContent.classList.add('border-danger');
                } else if (alertType === 'warning') {
                    modalHeader.classList.add('bg-warning', 'text-dark');
                    modalContent.classList.add('border-warning');
                } else {
                    modalHeader.classList.add('bg-info', 'text-white');
                    modalContent.classList.add('border-info');
                }

                // Show modal
                const modal = new bootstrap.Modal(modalEl, {
                    backdrop: 'static',
                    keyboard: true
                });

                modal.show();

                // Auto-close after 5 seconds for success/info, 7 seconds for warnings, 10 seconds for errors
                let autoCloseTime = 5000;
                if (alertType === 'warning') autoCloseTime = 7000;
                if (alertType === 'danger') autoCloseTime = 10000;

                const autoCloseTimer = setTimeout(() => {
                    modal.hide();
                }, autoCloseTime);

                // Clear timer when modal is closed
                modalEl.addEventListener('hidden.bs.modal', function() {
                    clearTimeout(autoCloseTimer);
                }, { once: true });
            }

            // Show messages one by one
            function showNextMessage() {
                if (messageIndex < messages.length) {
                    const msg = messages[messageIndex];
                    const tag = msg.getAttribute('data-tag');
                    const message = msg.getAttribute('data-message');

                    showMessageModal(message, tag);
                    messageIndex++;

                    // Wait for modal to close before showing next message
                    const modalEl = document.getElementById('messageModal');
                    modalEl.addEventListener('hidden.bs.modal', function() {
                        showNextMessage();
                    }, { once: true });
                }
            }

            // Start showing messages
            if (messages.length > 0) {
                showNextMessage();
            }
        });

        // ============================================
        // HERO SLIDER - JavaScript
        // ============================================
        function initHeroSlider() {
            const slider = document.getElementById('heroSlider');
            if (!slider) {
                console.warn('Hero slider no encontrado');
                return;
            }

            const slides = slider.querySelectorAll('.hero-slide');
            const prevBtn = document.getElementById('heroPrevBtn');
            const nextBtn = document.getElementById('heroNextBtn');
            const progressBar = document.getElementById('heroProgressBar');

            if (slides.length === 0) {
                console.warn('No hay slides en el hero slider');
                return;
            }

            // Aspect ratio por defecto de las imágenes desktop: 1905x500 = 3.81:1
            const DESKTOP_ASPECT_RATIO = 500 / 1905; // 0.2625
            // Aspect ratio por defecto para móviles (ajustar según tus imágenes móviles)
            const MOBILE_ASPECT_RATIO = 500 / 1905; // Por defecto igual, se ajustará dinámicamente

            // Función para obtener el aspect ratio de la imagen visible
            function getImageAspectRatio() {
                const activeSlide = slider.querySelector('.hero-slide.active');
                if (!activeSlide) return DESKTOP_ASPECT_RATIO;

                const img = activeSlide.querySelector('img');
                if (!img) return DESKTOP_ASPECT_RATIO;

                // Si la imagen ya está cargada, usar sus dimensiones reales
                if (img.naturalWidth > 0 && img.naturalHeight > 0) {
                    return img.naturalHeight / img.naturalWidth;
                }

                // Si es móvil (ancho <= 768px), usar aspect ratio móvil
                const isMobile = window.innerWidth <= 768;
                return isMobile ? MOBILE_ASPECT_RATIO : DESKTOP_ASPECT_RATIO;
            }

            // Función para ajustar la altura del contenedor según el ancho
            function adjustContainerHeight() {
                const container = slider;
                if (!container) return;

                const containerWidth = container.offsetWidth || container.clientWidth;
                if (containerWidth > 0) {
                    // Calcular altura basada en el aspect ratio de la imagen visible
                    const aspectRatio = getImageAspectRatio();
                    const calculatedHeight = containerWidth * aspectRatio;
                    container.style.height = calculatedHeight + 'px';
                }
            }

            // Ajustar altura inicial
            adjustContainerHeight();

            // Ajustar altura cuando las imágenes se carguen
            const images = slider.querySelectorAll('.hero-slide img');
            let imagesLoaded = 0;
            images.forEach(function(img) {
                if (img.complete) {
                    imagesLoaded++;
                } else {
                    img.addEventListener('load', function() {
                        imagesLoaded++;
                        if (imagesLoaded === images.length) {
                            adjustContainerHeight();
                        }
                    });
                }
            });
            if (imagesLoaded === images.length) {
                adjustContainerHeight();
            }

            // Ajustar altura cuando cambie el tamaño de la ventana
            let resizeTimeout;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(adjustContainerHeight, 100);
            });

            let currentSlide = 0;
            let slideInterval = null;
            const slideDuration = 5000; // 5 segundos

            // Función para mostrar un slide específico
            function showSlide(index) {
                // Asegurar que el índice esté dentro del rango
                if (index < 0) {
                    currentSlide = slides.length - 1;
                } else if (index >= slides.length) {
                    currentSlide = 0;
                } else {
                    currentSlide = index;
                }

                // Remover clase active de todos los slides
                slides.forEach((slide) => {
                    slide.classList.remove('active');
                });

                // Agregar clase active al slide actual
                if (slides[currentSlide]) {
                    slides[currentSlide].classList.add('active');
                    // Recalcular altura después de cambiar de slide (puede tener diferente aspect ratio)
                    setTimeout(function() {
                        adjustContainerHeight();
                    }, 50);
                }
            }

            // Función para avanzar al siguiente slide
            function nextSlide() {
                showSlide(currentSlide + 1);
            }

            // Función para retroceder al slide anterior
            function prevSlide() {
                showSlide(currentSlide - 1);
            }

            // Función para reiniciar la barra de progreso
            function resetProgress() {
                if (!progressBar) return;

                // Cancelar cualquier animación anterior
                progressBar.style.transition = 'none';
                progressBar.style.width = '0%';
            }

            // Función para iniciar la animación de la barra de progreso
            function startProgress() {
                if (!progressBar) return;

                // Primero resetear completamente
                progressBar.style.transition = 'none';
                progressBar.style.width = '0%';

                // Forzar reflow
                progressBar.offsetWidth;

                // Luego iniciar la animación
                setTimeout(() => {
                    if (progressBar) {
                        progressBar.style.transition = `width ${slideDuration}ms linear`;
                        progressBar.style.width = '100%';
                    }
                }, 50);
            }

            // Función para iniciar el autoplay
            function startAutoplay() {
                // Limpiar intervalos anteriores
                if (slideInterval) {
                    clearInterval(slideInterval);
                    slideInterval = null;
                }

                // Iniciar barra de progreso
                startProgress();

                // Cambiar slide cada slideDuration
                slideInterval = setInterval(() => {
                    nextSlide();
                    // Reiniciar progreso inmediatamente después de cambiar de slide
                    startProgress();
                }, slideDuration);
            }

            // Función para pausar el autoplay
            function pauseAutoplay() {
                if (slideInterval) {
                    clearInterval(slideInterval);
                    slideInterval = null;
                }

                if (progressBar) {
                    // Pausar la animación manteniendo el ancho actual
                    try {
                        const computedStyle = window.getComputedStyle(progressBar);
                        const currentWidth = computedStyle.width;
                        progressBar.style.transition = 'none';
                        progressBar.style.width = currentWidth;
                    } catch (e) {
                        console.warn('Error al pausar progreso:', e);
                    }
                }
            }

            // Event listeners para los botones
            if (prevBtn) {
                prevBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    prevSlide();
                    startAutoplay();
                });
            }

            if (nextBtn) {
                nextBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    nextSlide();
                    startAutoplay();
                });
            }

            // Pausar cuando el mouse está sobre el slider
            if (slider) {
                slider.addEventListener('mouseenter', pauseAutoplay);
                slider.addEventListener('mouseleave', startAutoplay);
            }

            // Inicializar
            showSlide(0);

            // Ajustar altura después de un pequeño delay para asegurar que el DOM esté listo
            setTimeout(function() {
                adjustContainerHeight();
                startAutoplay();
            }, 100);

            // Limpiar intervalos cuando la página se oculta
            document.addEventListener('visibilitychange', function() {
                if (document.hidden) {
                    pauseAutoplay();
                } else {
                    startAutoplay();
                }
            });

            // Limpiar al salir de la página
            window.addEventListener('beforeunload', function() {
                if (slideInterval) {
                    clearInterval(slideInterval);
                }
            });
        }

        // Inicializar cuando el DOM esté listo
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initHeroSlider);
        } else {
            // DOM ya está listo
            initHeroSlider();
        }
    </script>
</body>
</html>

