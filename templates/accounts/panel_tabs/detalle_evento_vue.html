{% load i18n %}
{% load static %}
{% load url_filters %}
{% load l10n %}

<!-- Estilos responsive para mÃ³vil (copiados del template original) -->
<style>
    /* Ensure body and html have no margins/padding when modal is open */
    body.modal-open,
    html.modal-open {
        margin: 0 !important;
        padding: 0 !important;
        overflow: hidden !important;
        width: 100% !important;
        height: 100% !important;
    }

    /* Fullscreen Modal Styles */
    .room-selection-modal-fullscreen {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
        margin: 0 !important;
        padding: 0 !important;
        background: rgba(0, 0, 0, 0.6) !important;
        backdrop-filter: blur(5px) !important;
        -webkit-backdrop-filter: blur(5px) !important;
        z-index: 9999999 !important; /* Z-index extremadamente alto para estar por encima de TODO */
        /* Avoid double scroll: overlay should NOT scroll; modal-body will */
        overflow: hidden !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 20px !important;
        isolation: isolate !important; /* Crear nuevo contexto de apilamiento */
    }

    .room-selection-modal-fullscreen .modal-dialog {
        margin: 0 auto !important;
        max-width: 1400px !important;
        width: 100% !important;
        padding: 0 10px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
    }

    .room-selection-modal-fullscreen .modal-content {
        margin: 0 !important;
        border-radius: 16px !important;
        max-height: 95vh !important;
        height: auto !important;
        min-height: auto !important;
        width: 100% !important;
        max-width: 100% !important;
        display: flex !important;
        flex-direction: column !important;
        overflow: hidden !important;
    }

    .room-selection-modal-fullscreen .modal-body {
        flex: 1 1 auto !important;
        min-height: 0 !important;
        overflow-y: auto !important;
    }

    @media (max-width: 991.98px) {
        .room-selection-modal-fullscreen {
            padding: 0 !important;
            align-items: stretch !important;
        }

        .room-selection-modal-fullscreen .modal-dialog {
            padding: 0 !important;
            max-width: 100% !important;
            align-items: stretch !important;
        }

        .room-selection-modal-fullscreen .modal-content {
            border-radius: 0 !important;
            max-height: 100vh !important;
        }
    }

    /* Toast Message Styles */
    .toast-message {
        font-size: 14px !important;
        color: #2c3e50 !important;
        line-height: 1.6 !important;
        word-wrap: break-word !important;
        font-family: 'Arial', 'Helvetica', sans-serif !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    /* Room Selection Modal Styles - Original Design */
    /* Rooms grid: responsive, consistent spacing */
    .rooms-grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 18px;
        padding: 8px;
        align-items: stretch;
    }

    @media (max-width: 768px) {
        .rooms-grid-container {
            grid-template-columns: 1fr;
            gap: 14px;
        }
    }

    .room-listing-inline {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 0;
        padding: 0;
        background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
        border-radius: 16px;
        margin-bottom: 0;
        box-shadow: 0 4px 16px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
        border: 2px solid #f1f3f5;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        overflow: hidden;
        position: relative;
        height: 100%;
    }

    .room-listing-inline::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, var(--mlb-blue) 0%, var(--mlb-light-blue) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .room-listing-inline:hover {
        border-color: var(--mlb-blue);
        box-shadow: 0 12px 32px rgba(13, 44, 84, 0.2), 0 6px 12px rgba(0,0,0,0.12);
        transform: translateY(-4px);
    }

    .room-listing-inline:hover::before {
        opacity: 1;
    }

    .room-listing-inline .room-image-container {
        width: 100%;
        height: 240px;
        min-width: 100%;
        flex-shrink: 0;
        position: relative;
        overflow: hidden;
        background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
        border-radius: 16px 16px 0 0;
    }

    .room-listing-inline .room-image-container::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.02) 100%);
        pointer-events: none;
        z-index: 1;
    }

    .room-slider-wrapper {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
        cursor: pointer;
    }

    .room-slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        transform: scale(1.05);
        will-change: opacity, transform;
    }

    .room-slide.active {
        opacity: 1;
        z-index: 1;
        transform: scale(1);
    }

    .room-slide img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        display: block;
    }

    .room-listing-inline:hover .room-slide.active img {
        transform: scale(1.08);
    }

    /* Slider Navigation Arrows */
    .room-slider-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.9);
        border: none;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 3;
        opacity: 0;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        backdrop-filter: blur(4px);
    }

    .room-slider-nav:hover {
        background: white;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
        transform: translateY(-50%) scale(1.1);
    }

    .room-slider-nav.prev {
        left: 10px;
    }

    .room-slider-nav.next {
        right: 10px;
    }

    .room-image-container:hover .room-slider-nav {
        opacity: 1;
    }

    .room-slider-nav i {
        color: var(--mlb-blue);
        font-size: 0.9rem;
        font-weight: 700;
    }

    .room-slider-dots {
        position: absolute;
        bottom: 12px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 6px;
        z-index: 3;
        background: rgba(0, 0, 0, 0.4);
        padding: 8px 12px;
        border-radius: 25px;
        backdrop-filter: blur(8px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .room-dot {
        width: 7px;
        height: 7px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.6);
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
    }

    .room-dot:hover {
        background: rgba(255, 255, 255, 0.9);
        transform: scale(1.2);
    }

    .room-dot.active {
        background: white;
        width: 24px;
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .room-listing-inline .room-info {
        flex: 1;
        min-width: 0;
        padding: 14px 16px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        background: transparent;
    }

    .room-listing-inline .room-header {
        margin-bottom: 0;
        display: flex;
        flex-direction: column;
        gap: 2px;
        flex-shrink: 0;
    }

    .room-listing-inline .room-content-wrapper {
        display: flex;
        flex-direction: column;
        gap: 8px;
        flex: 1;
        justify-content: space-between;
    }

    /* Features (left) + Amenities (right) on the same row */
    .room-meta-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: nowrap; /* keep in one line */
    }

    .room-meta-row .room-features {
        flex: 0 0 auto;
        min-width: 0;
    }

    .room-meta-row .room-amenities {
        flex: 1 1 auto;
        justify-content: flex-end;
        flex-wrap: nowrap;           /* keep icons in one line */
        overflow-x: auto;            /* if too many icons, scroll horizontally */
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
    }

    @media (max-width: 420px) {
        .room-meta-row .room-features {
            min-width: 0;
        }
    }

    /* Ensure features row doesn't wrap internally */
    .room-meta-row .room-features {
        white-space: nowrap;
    }

    .room-listing-inline .room-name {
        font-size: 1.1rem;
        font-weight: 900;
        color: var(--mlb-blue);
        margin: 0;
        line-height: 1.2;
        letter-spacing: -0.2px;
    }

    .room-listing-inline .room-type {
        font-size: 0.7rem;
        color: #64748b;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.45px;
        margin: 0;
    }

    .room-listing-inline .room-features {
        font-size: 0.78rem;
        color: #475569;
        margin: 0;
        display: flex;
        align-items: center;
        gap: 6px;
        flex-wrap: wrap;
    }

    .room-listing-inline .room-features span {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        padding: 4px 9px;
        border-radius: 8px;
        border: 1px solid #e2e8f0;
        font-size: 0.72rem;
        font-weight: 700;
        color: #475569;
        box-shadow: 0 1px 2px rgba(0,0,0,0.04);
        transition: all 0.2s ease;
        line-height: 1.1;
        white-space: nowrap;
    }

    .room-listing-inline .room-features span:hover {
        background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
        border-color: var(--mlb-blue);
        transform: translateY(-1px);
    }

    .room-listing-inline .room-footer {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
        margin-top: auto;
        padding-top: 10px;
        border-top: 1px solid #eef2f7;
    }

    .room-listing-inline .room-price-zone {
        display: flex;
        flex-direction: column;
        gap: 4px;
        align-items: center;
        width: 100%;
        text-align: center;
    }

    .room-listing-inline .room-actions {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-shrink: 0;
        width: 100%;
        justify-content: stretch;
    }

    .room-listing-inline .room-actions button {
        flex: 1;
    }

    .room-listing-inline .room-price-wrapper {
        display: flex;
        flex-direction: column;
        gap: 4px;
        align-items: center;
        width: 100%;
    }

    .room-listing-inline .room-price {
        font-size: 1.35rem;
        font-weight: 900;
        color: var(--mlb-red);
        margin: 0;
        line-height: 1.1;
        letter-spacing: -0.4px;
        text-shadow: 0 1px 2px rgba(213, 0, 50, 0.08);
        text-align: center;
    }

    .room-listing-inline .room-price small {
        font-size: 0.72rem;
        font-weight: 800;
        color: #94a3b8;
        text-transform: lowercase;
    }

    .room-listing-inline .room-price-includes {
        font-size: 0.75rem;
        color: #64748b;
        margin: 0;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        font-weight: 600;
        white-space: nowrap;
        justify-content: center;
        text-align: center;
    }

    .room-listing-inline .room-price-includes i {
        font-size: 0.7rem;
        color: var(--mlb-blue);
        opacity: 0.8;
    }

    .room-listing-inline .room-price-includes strong {
        font-size: 0.8rem;
        color: var(--mlb-red);
        font-weight: 700;
        margin: 0 2px;
    }

    .room-listing-inline[data-selected="true"] {
        border-color: var(--mlb-red) !important;
        border-width: 3px !important;
        background: linear-gradient(135deg, #fff5f5 0%, #ffffff 50%, #fffafa 100%) !important;
        box-shadow: 0 8px 24px rgba(213, 0, 50, 0.2), 0 4px 12px rgba(213, 0, 50, 0.15) !important;
        transform: translateY(-2px);
    }

    .room-listing-inline[data-selected="true"]::before {
        background: linear-gradient(90deg, var(--mlb-red) 0%, #ff1744 100%);
        opacity: 1;
        height: 4px;
    }

    .room-listing-inline[data-selected="true"]::after {
        content: '\f058';
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
        position: absolute;
        top: 12px;
        right: 12px;
        color: white;
        font-size: 1.2rem;
        z-index: 10;
        background: linear-gradient(135deg, var(--mlb-red) 0%, #ff1744 100%);
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(213, 0, 50, 0.4), 0 2px 4px rgba(0,0,0,0.2);
        animation: checkPulse 0.6s ease-out;
    }

    @keyframes checkPulse {
        0% {
            transform: scale(0);
            opacity: 0;
        }
        50% {
            transform: scale(1.2);
        }
        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    .room-listing-inline[data-selected="true"] .room-name {
        color: var(--mlb-red) !important;
    }

    .room-amenities {
        margin: 0;
        display: flex;
        flex-wrap: nowrap;
        gap: 5px;
        align-items: center;
    }

    .room-amenities span {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 30px;
        height: 30px;
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        border: 1.5px solid #e2e8f0;
        border-radius: 8px;
        color: var(--mlb-blue);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    .room-amenities span:hover {
        background: linear-gradient(135deg, var(--mlb-blue) 0%, var(--mlb-light-blue) 100%);
        color: white;
        border-color: var(--mlb-blue);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(13, 44, 84, 0.2);
    }

    @media (max-width: 1200px) {
        .rooms-grid-container {
            grid-template-columns: repeat(2, 1fr);
            gap: 14px;
        }
    }

    @media (max-width: 768px) {
        .rooms-grid-container {
            grid-template-columns: 1fr;
            gap: 12px;
        }
    }

    /* Responsive Grid for Modal (Global) */
    .modal-grid-layout {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 14px !important;
    }

    .guest-grid-layout {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 6px !important;
    }

    /* ============================================== */
    /* BORDE GRADIENTE (SIN ANIMACIONES) - BOTONES DE PAGO */
    /* ============================================== */

    .payment-button:not(:disabled):not([disabled]) {
        position: relative !important;
        overflow: visible !important;
        transition: transform 0.18s ease, filter 0.18s ease !important;
    }

    /* Asegura que el contenido quede por encima del borde */
    .payment-button:not(:disabled):not([disabled]) > * {
        position: relative;
        z-index: 2;
    }

    /* Gradientes por botÃ³n */
    .payment-button-plan:not(:disabled):not([disabled]) {
        --ring-grad: linear-gradient(135deg, rgba(13, 44, 84, 0.85), rgba(80, 151, 255, 0.85));
    }
    .payment-button-pay:not(:disabled):not([disabled]) {
        --ring-grad: linear-gradient(135deg, rgba(220, 53, 69, 0.9), rgba(255, 193, 7, 0.85));
    }
    .payment-button-register:not(:disabled):not([disabled]) {
        --ring-grad: linear-gradient(135deg, rgba(40, 167, 69, 0.9), rgba(32, 201, 151, 0.85));
    }

    /* Borde gradiente delgado alrededor (ring) */
    .payment-button:not(:disabled):not([disabled])::before {
        content: '';
        position: absolute;
        inset: -2px;                 /* quÃ© tan â€œafueraâ€ estÃ¡ el borde */
        border-radius: inherit;
        padding: 2px;                /* grosor de la lÃ­nea */
        background: var(--ring-grad);
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        pointer-events: none;
        z-index: 1;
        opacity: 0.85;
    }

    /* Hover: solo un toque, sin animaciÃ³n */
    .payment-button:not(:disabled):not([disabled]):hover {
        transform: translateY(-1px) !important;
        filter: brightness(1.03);
    }
    .payment-button:not(:disabled):not([disabled]):hover::before {
        opacity: 1;
    }

    /* ============================================== */
    /* FIN BORDE GRADIENTE */
    /* ============================================== */

    /* Estilos especÃ­ficos para mÃ³vil - Detalle de Evento */
    @media (max-width: 768px) {
        html, body {
            padding: 0 !important;
            margin: 0 !important;
            width: 100% !important;
        }
        .iframe-inner {
            padding: 0 !important;
            margin: 0 !important;
            width: 100% !important;
            max-width: 100% !important;
        }
        #event-details-section {
            padding-left: 0 !important;
            padding-right: 0 !important;
            width: 100% !important;
        }
        .tab-content-header {
            padding: 0 0 12px 0 !important;
            margin-bottom: 0 !important;
        }
        .tab-content-header h4 {
            font-size: 1.15rem !important;
            margin-bottom: 4px !important;
        }
        .tab-content-header p {
            font-size: 0.8rem !important;
            margin-bottom: 0 !important;
        }
        .row.g-4 {
            flex-direction: column !important;
            gap: 12px !important;
            margin: 0 !important;
            width: 100% !important;
            max-width: 100% !important;
        }
        .col-lg-8, .col-lg-4 {
            width: 100% !important;
            padding: 0 !important;
            max-width: 100% !important;
        }
        .event-info-card {
            padding: 16px 8px !important;
            border-radius: 12px !important;
            margin-bottom: 0 !important;
            width: 100% !important;
            max-width: 100% !important;
        }
        .checkout-card {
            position: relative !important;
            top: 0 !important;
            padding: 16px 12px !important;
            border-radius: 12px !important;
        }
        .btn-lg, .btn {
            width: 100% !important;
            padding: 12px 18px !important;
            font-size: 0.9rem !important;
            margin-bottom: 8px !important;
        }

        /* Estilos para botones de pago - Hacer MUY evidente que son clickeables */
        .payment-button:not(:disabled):not([disabled]) {
            cursor: pointer !important;
            position: relative !important;
            border-width: 2px !important;
            animation: pulseButton 2s ease-in-out infinite !important;
        }

        @keyframes pulseButton {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            }
            50% {
                box-shadow: 0 6px 25px rgba(0, 0, 0, 0.2);
            }
        }

        .payment-button-plan:not(:disabled):not([disabled]) {
            border: 2px solid var(--mlb-blue) !important;
            box-shadow: 0 4px 15px rgba(13, 44, 84, 0.15) !important;
        }

        .payment-button-plan:not(:disabled):not([disabled]) {
            animation: pulseButtonBlue 2s ease-in-out infinite !important;
        }

        @keyframes pulseButtonBlue {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(13, 44, 84, 0.15);
                border-color: var(--mlb-blue);
            }
            50% {
                box-shadow: 0 6px 25px rgba(13, 44, 84, 0.3);
                border-color: var(--mlb-light-blue);
            }
        }

        .payment-button-pay:not(:disabled):not([disabled]) {
            animation: pulseButtonRed 2s ease-in-out infinite !important;
        }

        @keyframes pulseButtonRed {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
            }
            50% {
                box-shadow: 0 8px 30px rgba(220, 53, 69, 0.5);
            }
        }

        .payment-button-register:not(:disabled):not([disabled]) {
            animation: pulseButtonGreen 2s ease-in-out infinite !important;
        }

        @keyframes pulseButtonGreen {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
            }
            50% {
                box-shadow: 0 8px 30px rgba(40, 167, 69, 0.5);
            }
        }

        .payment-button:not(:disabled):not([disabled]):hover {
            transform: translateY(-3px) scale(1.03) !important;
            animation: none !important;
            z-index: 10 !important;
        }

        .payment-button-plan:not(:disabled):not([disabled]):hover {
            box-shadow: 0 8px 30px rgba(13, 44, 84, 0.4) !important;
            border-color: var(--mlb-light-blue) !important;
            border-width: 3px !important;
        }

        .payment-button-pay:not(:disabled):not([disabled]):hover {
            box-shadow: 0 10px 40px rgba(220, 53, 69, 0.6) !important;
            background: linear-gradient(135deg, #ff1a4d 0%, var(--mlb-red) 50%, #b30029 100%) !important;
        }

        .payment-button-register:not(:disabled):not([disabled]):hover {
            box-shadow: 0 10px 40px rgba(40, 167, 69, 0.6) !important;
            background: linear-gradient(135deg, #34ce57 0%, #28c997 50%, #1fb8d4 100%) !important;
        }

        .payment-button:not(:disabled):not([disabled]):active {
            transform: translateY(-1px) scale(0.97) !important;
            animation: none !important;
        }

        /* Efecto de brillo que pasa sobre el botÃ³n */
        .payment-button:not(:disabled):not([disabled])::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
            pointer-events: none;
            z-index: 1;
            border-radius: inherit;
        }

        .payment-button:not(:disabled):not([disabled]):hover::before {
            left: 100%;
        }

        /* Efecto de borde animado MUY VISIBLE alrededor del botÃ³n */
        .payment-button:not(:disabled):not([disabled]) {
            overflow: visible !important;
            position: relative !important;
        }

        /* Pelota de baseball animada alrededor de los botones */
        .payment-button:not(:disabled):not([disabled])::after {
            content: 'âš¾';
            position: absolute;
            font-size: 1.8rem;
            z-index: 1000;
            pointer-events: none;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.4));
            text-shadow: 0 0 10px rgba(255,255,255,0.8);
        }

        .payment-button-plan:not(:disabled):not([disabled])::after {
            animation: baseballOrbitBlue 3s linear infinite;
        }

        .payment-button-pay:not(:disabled):not([disabled])::after {
            animation: baseballOrbitRed 3s linear infinite;
        }

        .payment-button-register:not(:disabled):not([disabled])::after {
            animation: baseballOrbitGreen 3s linear infinite;
        }

        /* AnimaciÃ³n de Ã³rbita para la pelota de baseball - Azul */
        @keyframes baseballOrbitBlue {
            0% {
                top: -10px;
                left: 50%;
                transform: translateX(-50%) rotate(0deg);
            }
            25% {
                top: 50%;
                left: calc(100% + 10px);
                transform: translateX(-50%) rotate(90deg);
            }
            50% {
                top: calc(100% + 10px);
                left: 50%;
                transform: translateX(-50%) rotate(180deg);
            }
            75% {
                top: 50%;
                left: -20px;
                transform: translateX(-50%) rotate(270deg);
            }
            100% {
                top: -10px;
                left: 50%;
                transform: translateX(-50%) rotate(360deg);
            }
        }

        /* AnimaciÃ³n de Ã³rbita para la pelota de baseball - Rojo (mÃ¡s rÃ¡pida) */
        @keyframes baseballOrbitRed {
            0% {
                top: -10px;
                left: 50%;
                transform: translateX(-50%) rotate(0deg) scale(1);
            }
            25% {
                top: 50%;
                left: calc(100% + 10px);
                transform: translateX(-50%) rotate(90deg) scale(1.1);
            }
            50% {
                top: calc(100% + 10px);
                left: 50%;
                transform: translateX(-50%) rotate(180deg) scale(1);
            }
            75% {
                top: 50%;
                left: -20px;
                transform: translateX(-50%) rotate(270deg) scale(1.1);
            }
            100% {
                top: -10px;
                left: 50%;
                transform: translateX(-50%) rotate(360deg) scale(1);
            }
        }

        /* AnimaciÃ³n de Ã³rbita para la pelota de baseball - Verde */
        @keyframes baseballOrbitGreen {
            0% {
                top: -10px;
                left: 50%;
                transform: translateX(-50%) rotate(0deg);
            }
            25% {
                top: 50%;
                left: calc(100% + 10px);
                transform: translateX(-50%) rotate(90deg);
            }
            50% {
                top: calc(100% + 10px);
                left: 50%;
                transform: translateX(-50%) rotate(180deg);
            }
            75% {
                top: 50%;
                left: -20px;
                transform: translateX(-50%) rotate(270deg);
            }
            100% {
                top: -10px;
                left: 50%;
                transform: translateX(-50%) rotate(360deg);
            }
        }

        /* En hover, la pelota gira mÃ¡s rÃ¡pido */
        .payment-button:not(:disabled):not([disabled]):hover::after {
            animation-duration: 1.5s !important;
        }

        /* Borde animado MUY VISIBLE siempre */
        .payment-button-plan:not(:disabled):not([disabled]) {
            box-shadow: 0 4px 15px rgba(13, 44, 84, 0.15),
                        0 0 0 3px rgba(13, 44, 84, 0.6),
                        0 0 0 6px rgba(80, 151, 255, 0.5) !important;
            animation: pulseBorderBlue 2s ease-in-out infinite !important;
        }

        .payment-button-pay:not(:disabled):not([disabled]) {
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3),
                        0 0 0 3px rgba(220, 53, 69, 0.7),
                        0 0 0 6px rgba(255, 26, 77, 0.6) !important;
            animation: pulseBorderRed 2s ease-in-out infinite !important;
        }

        .payment-button-register:not(:disabled):not([disabled]) {
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3),
                        0 0 0 3px rgba(40, 167, 69, 0.7),
                        0 0 0 6px rgba(32, 201, 151, 0.6) !important;
            animation: pulseBorderGreen 2s ease-in-out infinite !important;
        }

        /* Hover hace que el efecto sea aÃºn mÃ¡s pronunciado */
        .payment-button-plan:not(:disabled):not([disabled]):hover {
            box-shadow: 0 8px 30px rgba(13, 44, 84, 0.4),
                        0 0 0 4px rgba(13, 44, 84, 0.8),
                        0 0 0 8px rgba(80, 151, 255, 0.7) !important;
            animation: pulseBorderBlueIntense 1s ease-in-out infinite !important;
        }

        .payment-button-pay:not(:disabled):not([disabled]):hover {
            box-shadow: 0 10px 40px rgba(220, 53, 69, 0.6),
                        0 0 0 4px rgba(220, 53, 69, 0.9),
                        0 0 0 8px rgba(255, 26, 77, 0.8) !important;
            animation: pulseBorderRedIntense 1s ease-in-out infinite !important;
        }

        .payment-button-register:not(:disabled):not([disabled]):hover {
            box-shadow: 0 10px 40px rgba(40, 167, 69, 0.6),
                        0 0 0 4px rgba(40, 167, 69, 0.9),
                        0 0 0 8px rgba(32, 201, 151, 0.8) !important;
            animation: pulseBorderGreenIntense 1s ease-in-out infinite !important;
        }

        @keyframes pulseBorderBlue {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(13, 44, 84, 0.15),
                            0 0 0 3px rgba(13, 44, 84, 0.6),
                            0 0 0 6px rgba(80, 151, 255, 0.5);
            }
            50% {
                box-shadow: 0 4px 15px rgba(13, 44, 84, 0.15),
                            0 0 0 4px rgba(80, 151, 255, 0.8),
                            0 0 0 8px rgba(80, 151, 255, 0.6);
            }
        }

        @keyframes pulseBorderBlueIntense {
            0%, 100% {
                box-shadow: 0 8px 30px rgba(13, 44, 84, 0.4),
                            0 0 0 4px rgba(13, 44, 84, 0.8),
                            0 0 0 8px rgba(80, 151, 255, 0.7);
            }
            50% {
                box-shadow: 0 8px 30px rgba(13, 44, 84, 0.4),
                            0 0 0 5px rgba(80, 151, 255, 1),
                            0 0 0 10px rgba(80, 151, 255, 0.8);
            }
        }

        @keyframes pulseBorderRed {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3),
                            0 0 0 3px rgba(220, 53, 69, 0.7),
                            0 0 0 6px rgba(255, 26, 77, 0.6);
            }
            50% {
                box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3),
                            0 0 0 4px rgba(255, 26, 77, 0.9),
                            0 0 0 8px rgba(255, 26, 77, 0.7);
            }
        }

        @keyframes pulseBorderRedIntense {
            0%, 100% {
                box-shadow: 0 10px 40px rgba(220, 53, 69, 0.6),
                            0 0 0 4px rgba(220, 53, 69, 0.9),
                            0 0 0 8px rgba(255, 26, 77, 0.8);
            }
            50% {
                box-shadow: 0 10px 40px rgba(220, 53, 69, 0.6),
                            0 0 0 5px rgba(255, 26, 77, 1),
                            0 0 0 10px rgba(255, 26, 77, 0.9);
            }
        }

        @keyframes pulseBorderGreen {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3),
                            0 0 0 3px rgba(40, 167, 69, 0.7),
                            0 0 0 6px rgba(32, 201, 151, 0.6);
            }
            50% {
                box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3),
                            0 0 0 4px rgba(32, 201, 151, 0.9),
                            0 0 0 8px rgba(32, 201, 151, 0.7);
            }
        }

        @keyframes pulseBorderGreenIntense {
            0%, 100% {
                box-shadow: 0 10px 40px rgba(40, 167, 69, 0.6),
                            0 0 0 4px rgba(40, 167, 69, 0.9),
                            0 0 0 8px rgba(32, 201, 151, 0.8);
            }
            50% {
                box-shadow: 0 10px 40px rgba(40, 167, 69, 0.6),
                            0 0 0 5px rgba(32, 201, 151, 1),
                            0 0 0 10px rgba(32, 201, 151, 0.9);
            }
        }

        /* Modal specific adjustments */
        .modal-body {
            padding: 15px !important;
        }

        .modal-footer {
            padding: 12px !important;
            flex-direction: column-reverse !important;
            gap: 10px !important;
            justify-content: center !important;
        }

        .modal-footer > div {
            width: 100% !important;
            display: flex !important;
            flex-direction: column !important;
            gap: 8px !important;
            margin: 0 !important;
        }

        .modal-footer .btn {
            width: 100% !important;
            margin: 0 !important;
            padding: 12px !important;
        }

        /* Invoice Summary on Mobile */
        .checkout-summary h5 {
            font-size: 0.95rem !important;
        }

        #checkout-players-summary, #checkout-hotel-summary, #checkout-hotel-buy-out-summary, #checkout-service-fee-summary {
            margin-bottom: 12px !important;
        }

        #checkout-players-summary > div, #checkout-hotel-summary > div {
            padding: 10px !important;
        }

        .checkout-summary span {
            font-size: 0.85rem !important;
        }

        .checkout-summary .font-weight-800,
        .checkout-summary .font-weight-900 {
            font-size: 1.1rem !important;
        }

        /* Toast on mobile */
        .toast-container {
            width: 100% !important;
            padding: 10px !important;
            left: 0 !important;
            right: 0 !important;
            top: 0 !important;
        }

        .toast {
            width: 100% !important;
            max-width: 100% !important;
            margin-bottom: 8px !important;
        }

        @media (max-width: 991.98px) {
            .modal-grid-layout {
                grid-template-columns: 1fr !important;
                gap: 12px !important;
            }
        }

        @media (max-width: 575.98px) {
            .guest-grid-layout {
                grid-template-columns: 1fr !important;
            }
        }
    }
</style>

<!-- Vue.js Integration for Event Detail Page -->
<!-- This replaces the vanilla JavaScript implementation with Vue.js -->

<!-- Vue.js CDN (Production) -->
<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

<!-- Event Detail Vue App -->
<script src="{% static 'js/vue/event-detail.js' %}?v={% now 'U' %}"></script>

<!-- Event Data (JSON) for Vue to consume -->
<script id="event-data" type="application/json">
{% localize off %}
{
    "id": {{ event.pk }},
    "title": "{{ event.title|escapejs }}",
    "description": {% if event.description %}"{{ event.description|escapejs }}"{% else %}null{% endif %},
    "title_team_manager": {% if event.title_team_manager %}"{{ event.title_team_manager|escapejs }}"{% else %}null{% endif %},
    "description_team_manager": {% if event.description_team_manager %}"{{ event.description_team_manager|escapejs }}"{% else %}null{% endif %},
    "title_spectator": {% if event.title_spectator %}"{{ event.title_spectator|escapejs }}"{% else %}null{% endif %},
    "description_spectator": {% if event.description_spectator %}"{{ event.description_spectator|escapejs }}"{% else %}null{% endif %},
    "start_date": "{{ event.start_date|date:'Y-m-d' }}",
    "end_date": "{{ event.end_date|date:'Y-m-d'|default:'' }}",
    "banner": "{% if event.banner %}{{ event.banner|clean_localhost_url }}{% endif %}",
    "banner_mobile": "{% if event.banner_mobile %}{{ event.banner_mobile|clean_localhost_url }}{% endif %}",
    "logo": "{% if event.logo %}{{ event.logo|clean_localhost_url }}{% endif %}",
    "video_url": "{{ event.video_url|default:''|escapejs }}",
    "external_link": "{{ event.external_link|default:''|escapejs }}",
    "default_entry_fee": {{ event.default_entry_fee|default:0 }},
    "service_fee": {{ event.service_fee|default_if_none:0 }},
    "default_entry_fee_team_manager": {{ event.default_entry_fee_team_manager|default:0 }},
    "service_fee_team_manager": {{ event.service_fee_team_manager|default_if_none:0 }},
    "gate_fee_amount_team_manager": {{ event.gate_fee_amount_team_manager|default:0 }},
    "payment_deadline_team_manager": "{{ event.payment_deadline_team_manager|date:'Y-m-d'|default:'' }}",
    "default_entry_fee_spectator": {{ event.default_entry_fee_spectator|default:0 }},
    "service_fee_spectator": {{ event.service_fee_spectator|default_if_none:0 }},
    "gate_fee_amount_spectator": {{ event.gate_fee_amount_spectator|default:0 }},
    "payment_deadline_spectator": "{{ event.payment_deadline_spectator|date:'Y-m-d'|default:'' }}",
    "stripe_checkout_url": "{% url 'accounts:create_stripe_event_checkout_session' event.pk %}",
    "payment_deadline": "{{ event.payment_deadline|date:'Y-m-d'|default:'' }}",
    "wallet_balance": {% if wallet_balance %}{{ wallet_balance|floatformat:2 }}{% else %}0{% endif %},
    "wallet_balance_total": {% if wallet_balance_total %}{{ wallet_balance_total|floatformat:2 }}{% else %}0{% endif %},
    "wallet_balance_pending": {% if wallet_balance_pending %}{{ wallet_balance_pending|floatformat:2 }}{% else %}0{% endif %},
    "category": {% if event.category %}{"id": {{ event.category.id }}, "name": "{{ event.category.name|escapejs }}"}{% else %}null{% endif %},
    "event_type": {% if event.event_type %}{"id": {{ event.event_type.id }}, "name": "{{ event.event_type.name|escapejs }}"}{% else %}null{% endif %},
    "status": "{{ event.get_status_display|escapejs }}",
    "city": {% if event.city %}{"id": {{ event.city.id }}, "name": "{{ event.city.name|escapejs }}"}{% else %}null{% endif %},
    "state": {% if event.state %}{"id": {{ event.state.id }}, "name": "{{ event.state.name|escapejs }}"}{% else %}null{% endif %},
    "country": {% if event.country %}{"id": {{ event.country.id }}, "name": "{{ event.country.name|escapejs }}"}{% else %}null{% endif %},
    "location": "{{ event.location|default:''|escapejs }}",
    "hotel": {% if event.hotel %}{
        "id": {{ event.hotel.pk }},
        "name": "{{ event.hotel.hotel_name|escapejs }}",
        "address": "{{ event.hotel.address|default:''|escapejs }}",
        "photo": "{% if event.hotel.photo %}{{ event.hotel.photo.url }}{% endif %}",
        "buy_out_fee": {{ event.hotel.buy_out_fee|default_if_none:0 }}
    }{% else %}null{% endif %},
    "primary_site": {% if event.primary_site %}{
        "id": {{ event.primary_site.id }},
        "name": "{{ event.primary_site.site_name|escapejs }}",
        "address_1": "{{ event.primary_site.address_1|default:''|escapejs }}",
        "address_2": "{{ event.primary_site.address_2|default:''|escapejs }}",
        "image": "{% if event.primary_site.image %}{{ event.primary_site.image.url }}{% endif %}"
    }{% else %}null{% endif %},
    "divisions": [
        {% for division in event.divisions.all %}
        {
            "id": {{ division.id }},
            "name": "{{ division.name|escapejs }}"
        }{% if not forloop.last %},{% endif %}
        {% endfor %}
    ],
    "user_type": "{{ user_type|default:'player' }}"
}
{% endlocalize %}
</script>

<!-- Registrant/User Data (JSON) -->
<script id="registrant-data" type="application/json">
{
    "id": {{ user.pk }},
    "name": "{% if user.get_full_name %}{{ user.get_full_name|escapejs }}{% else %}{{ user.username|escapejs }}{% endif %}",
    "email": "{{ user.email|escapejs }}",
    "birth_date": "{% if user.profile.birth_date %}{{ user.profile.birth_date|date:'Y-m-d' }}{% endif %}",
    "profile_picture": "{% if user.profile.profile_picture %}{{ user.profile.profile_picture.url }}{% endif %}",
    "is_registrant": true
}
</script>

<!-- Children/Players Data (JSON) -->
<script id="children-data" type="application/json">
[
    {% for child in children %}
    {
        "id": {{ child.pk }},
        "name": "{% if child.user.get_full_name %}{{ child.user.get_full_name|escapejs }}{% else %}{{ child.user.username|escapejs }}{% endif %}",
        "email": "{{ child.user.email|escapejs }}",
        "division": "{% if child.division %}{{ child.division.name|escapejs }}{% else %}''{% endif %}",
        "birth_date": "{% if child.user.profile.birth_date %}{{ child.user.profile.birth_date|date:'Y-m-d' }}{% endif %}",
        "profile_picture": "{% if child.user.profile.profile_picture %}{{ child.user.profile.profile_picture.url }}{% endif %}",
        "registered": {% if child.pk in registered_players %}true{% else %}false{% endif %},
        "is_eligible": {% if ineligible_player_ids and child.pk in ineligible_player_ids %}false{% else %}true{% endif %}
    }{% if not forloop.last %},{% endif %}
    {% endfor %}
]
</script>

<!-- Rooms Data (JSON) for Vue to consume -->
<script id="rooms-data-{{ event.hotel.pk|default:'' }}" type="application/json">
{% localize off %}
[
    {% if available_rooms %}
        {% for room in available_rooms %}
        {
            "id": {{ room.id }},
            "name": "{% if room.name %}{{ room.name|escapejs }}{% else %}{{ room.get_room_type_display|escapejs }}{% endif %}",
            "room_type": "{{ room.room_type|escapejs }}",
            "room_type_display": "{{ room.get_room_type_display|escapejs }}",
            "room_number": "{{ room.room_number|escapejs|default:'' }}",
            "description": "{{ room.description|escapejs|default:'' }}",
            "capacity": {{ room.capacity|default:4 }},
            "price_per_night": {{ room.price_per_night|default:0 }},
            "price_includes_guests": {{ room.price_includes_guests|default:2 }},
            "additional_guest_price": {{ room.additional_guest_price|default:0 }},
            "breakfast_included": {% if room.breakfast_included %}true{% else %}false{% endif %},
            "stock": {% if room.stock is not None %}{{ room.stock }}{% else %}null{% endif %},
            "check_in_date": "{% if room.check_in_date %}{{ room.check_in_date|date:'Y-m-d' }}{% endif %}",
            "check_out_date": "{% if room.check_out_date %}{{ room.check_out_date|date:'Y-m-d' }}{% endif %}",
            "check_in_time": "{% if room.check_in_time %}{{ room.check_in_time|time:'H:i' }}{% endif %}",
            "check_out_time": "{% if room.check_out_time %}{{ room.check_out_time|time:'H:i' }}{% endif %}",
            "price": {{ room.price_per_night|default:0 }},
            "taxes": [
                {% for tax in room.taxes.all %}
                {
                    "id": {{ tax.id }},
                    "name": "{{ tax.name|escapejs }}",
                    "amount": {{ tax.amount }}
                }{% if not forloop.last %},{% endif %}
                {% endfor %}
            ],
            "amenities": [
                {% for amenity in room.amenities.all %}
                {
                    "name": "{{ amenity.name|escapejs }}",
                    "icon": "{{ amenity.get_icon_class }}",
                    "icon_class": "fa-solid {{ amenity.get_icon_class }}"
                }{% if not forloop.last %},{% endif %}
                {% endfor %}
            ],
            "images": [
                {% for image in room.images.all %}
                {% if image.image_url %}
                {
                    "url": "{{ image.image_url }}",
                    "alt": "{{ image.image_alt|escapejs|default:'' }}"
                }{% if not forloop.last %},{% endif %}
                {% endif %}
                {% endfor %}
            ],
            "rules": [
                {% for rule in room.rules.all %}
                {% if rule.is_active %}
                {
                    "id": {{ rule.id }},
                    "min_adults": {{ rule.min_adults }},
                    "max_adults": {{ rule.max_adults }},
                    "min_children": {{ rule.min_children }},
                    "max_children": {{ rule.max_children }},
                    "description": "{{ rule.description|escapejs|default:'' }}",
                    "is_active": true
                }{% if not forloop.last %},{% endif %}
                {% endif %}
                {% endfor %}
            ]
        }{% if not forloop.last %},{% endif %}
        {% endfor %}
    {% endif %}
]
{% endlocalize %}
</script>

<!-- Container for Vue App -->
<div id="event-detail-app" data-hotel-pk="{{ event.hotel.pk|default:'' }}" data-event-pk="{{ event.pk }}">
    {% csrf_token %}
    <!-- Vue will mount here and render the entire event detail -->
</div>

<!-- Initialize Vue App -->
<script>
(function() {
    // Function to initialize the app
    function initializeApp() {
        // Check if Vue is loaded
        if (typeof Vue === 'undefined') {
            console.error('Vue.js is not loaded');
            return;
        }

        // Check if EventDetailApp is defined
        if (typeof window.EventDetailApp === 'undefined') {
            console.warn('EventDetailApp is not defined yet. Retrying...');
            // Retry after a short delay
            setTimeout(initializeApp, 100);
            return;
        }

    const { createApp } = Vue;
    const appElement = document.getElementById('event-detail-app');

    if (!appElement) {
        console.warn('Event detail app container not found');
        return;
    }

    // Load event data
    const eventDataEl = document.getElementById('event-data');
    let eventData = null;
    if (eventDataEl) {
        try {
            eventData = JSON.parse(eventDataEl.textContent);
        } catch (e) {
            console.error('Error parsing event data:', e);
        }
    }

    // Load children data
    const childrenDataEl = document.getElementById('children-data');
    let childrenData = [];
    if (childrenDataEl) {
        try {
            childrenData = JSON.parse(childrenDataEl.textContent);
        } catch (e) {
            console.error('Error parsing children data:', e);
        }
    }

    // Load registrant data
    const registrantDataEl = document.getElementById('registrant-data');
    let registrantData = null;
    if (registrantDataEl) {
        try {
            registrantData = JSON.parse(registrantDataEl.textContent);
        } catch (e) {
            console.error('Error parsing registrant data:', e);
        }
    }

    // Load rooms data
    const hotelPk = appElement.dataset.hotelPk;
    const roomsDataEl = document.getElementById('rooms-data-' + hotelPk);
    let roomsData = [];
    if (roomsDataEl) {
        try {
            const jsonText = roomsDataEl.textContent.trim();
            if (jsonText) {
                roomsData = JSON.parse(jsonText);
                roomsData = roomsData.filter(room => room && room.id);
            }
        } catch (e) {
            console.error('Error parsing rooms data:', e);
        }
    }

    try {
        // Create Vue app instance
        const app = createApp(window.EventDetailApp);

        // Mount the app
        const instance = app.mount('#event-detail-app');

        // Set initial data if available
        if (eventData && instance && instance.eventData) {
            instance.eventData.value = eventData;
        }
        if (registrantData && instance && instance.registrant) {
            instance.registrant.value = registrantData;
        }
        if (childrenData && childrenData.length > 0 && instance && instance.children) {
            instance.children.value = childrenData;
        }
        if (roomsData && roomsData.length > 0 && instance && instance.rooms) {
            instance.rooms.value = roomsData;
        }

        // Make Vue app instance accessible globally
        window.VueEventDetail = window.VueEventDetail || {};
        window.VueEventDetail[appElement.dataset.eventPk] = instance;

        console.log('Vue Event Detail app initialized successfully');
        console.log('Event:', eventData);
        console.log('Children:', childrenData.length);
        console.log('Rooms:', roomsData.length);

        // Interceptar las funciones de checkout para agregar logs
        if (instance && instance.handlePayNow) {
            const originalHandlePayNow = instance.handlePayNow;
            instance.handlePayNow = async function() {
                console.log('');
                console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
                console.log('ğŸ”¥ğŸ”¥ğŸ”¥ handlePayNow CLICKEADO ğŸ”¥ğŸ”¥ğŸ”¥');
                console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
                return originalHandlePayNow.call(this);
            };
        }

        if (instance && instance.handlePaymentPlan) {
            const originalHandlePaymentPlan = instance.handlePaymentPlan;
            instance.handlePaymentPlan = async function() {
                console.log('');
                console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
                console.log('ğŸ”¥ğŸ”¥ğŸ”¥ handlePaymentPlan CLICKEADO ğŸ”¥ğŸ”¥ğŸ”¥');
                console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
                return originalHandlePaymentPlan.call(this);
            };
        }

        if (instance && instance.handleRegisterOnly) {
            const originalHandleRegisterOnly = instance.handleRegisterOnly;
            instance.handleRegisterOnly = async function() {
                console.log('');
                console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
                console.log('ğŸŸ¢ğŸŸ¢ğŸŸ¢ handleRegisterOnly CLICKEADO ğŸŸ¢ğŸŸ¢ğŸŸ¢');
                console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
                return originalHandleRegisterOnly.call(this);
            };
        }
    } catch (e) {
        console.error('Error initializing Vue app:', e);
    }
    }

    // Wait for DOM and scripts to be ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            // Give scripts a moment to load
            setTimeout(initializeApp, 50);
        });
    } else {
        // DOM is already ready, but scripts might still be loading
        setTimeout(initializeApp, 50);
    }
})();
</script>

<!-- Script para interceptar y logear datos antes de enviar a Stripe -->
<script>
(function() {
    console.log('ğŸ”§ Script de logging de checkout cargado');

    // Esperar a que Vue se monte
    setTimeout(function() {
        // Interceptar el fetch para capturar datos antes de enviar
        const originalFetch = window.fetch;
        window.fetch = function(...args) {
            const url = args[0];
            const options = args[1] || {};

            // Verificar si es la URL de checkout de Stripe
            if (url && typeof url === 'string' && url.includes('create-checkout-session')) {
                console.log('');
                console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
                console.log('ğŸš€ğŸš€ğŸš€ INTERCEPTANDO PETICIÃ“N A STRIPE CHECKOUT ğŸš€ğŸš€ğŸš€');
                console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
                console.log('');
                console.log('ğŸ“ URL:', url);
                console.log('ğŸ“ MÃ©todo:', options.method || 'GET');

                // Si hay FormData en el body, extraerlo
                if (options.body instanceof FormData) {
                    console.log('ğŸ“‹ EXTRAYENDO DATOS DE FORMDATA...');
                    const formDataObject = {};

                    for (const [key, value] of options.body.entries()) {
                        if (key === 'hotel_reservation_json') {
                            try {
                                formDataObject[key] = JSON.parse(value);
                            } catch (e) {
                                formDataObject[key] = value;
                            }
                        } else if (key === 'players') {
                            if (!formDataObject[key]) {
                                formDataObject[key] = [];
                            }
                            formDataObject[key].push(value);
                        } else {
                            formDataObject[key] = value;
                        }
                    }

                    console.log('');
                    console.log('ğŸ“‹ FORMDATA COMPLETO:');
                    console.log(formDataObject);
                    console.log('');
                    console.log('ğŸ“‹ FORMDATA COMPLETO (JSON formateado):');
                    console.log(JSON.stringify(formDataObject, null, 2));
                    console.log('');

                    // Si hay datos de hotel, mostrarlos por separado
                    if (formDataObject.hotel_reservation_json) {
                        const hotelData = formDataObject.hotel_reservation_json;
                        console.log('ğŸ“¦ DATOS DE HOTEL (hotel_reservation_json):');
                        console.log(hotelData);
                        console.log('');
                        console.log('ğŸ“¦ DATOS DE HOTEL (JSON formateado):');
                        console.log(JSON.stringify(hotelData, null, 2));
                        console.log('');

                        if (hotelData.guest_assignments) {
                            console.log('ğŸ‘¥ ASIGNACIONES DE HUÃ‰SPEDES (guest_assignments):');
                            console.log(hotelData.guest_assignments);
                            console.log('');
                        }

                        if (hotelData.guests) {
                            console.log('ğŸ‘¥ LISTA COMPLETA DE HUÃ‰SPEDES (guests):');
                            console.log(hotelData.guests);
                            console.log('');
                        }

                        if (hotelData.rooms) {
                            console.log('ğŸ¨ HABITACIONES SELECCIONADAS (rooms):');
                            console.log(hotelData.rooms);
                            console.log('');
                        }
                    }

                    console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
                    console.log('âœ… ENVIANDO A STRIPE AHORA...');
                    console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
                    console.log('');
                }
            }

            // Llamar al fetch original
            return originalFetch.apply(this, args);
        };

        console.log('âœ… Interceptador de fetch configurado correctamente');
    }, 1000);
})();
</script>

