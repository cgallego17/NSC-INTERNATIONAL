{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Panel de Usuario - NCS{% endblock %}</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    {% block extra_css %}{% endblock %}

    <style>
        :root {
            --mlb-blue: #0d2c54;
            --mlb-red: #d50032;
            --mlb-light-blue: #132448;
            --mlb-gold: #ffd700;
            --mlb-dark: #1a1a1a;
        }

        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Top Bar */
        .top-bar {
            background: var(--mlb-dark);
            color: white;
            padding: 8px 0;
            font-size: 0.85rem;
        }

        .top-bar a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }

        .top-bar a:hover {
            color: white;
        }

        /* Navbar MLB Style */
        .navbar-mlb {
            background: var(--mlb-blue) !important;
            padding: 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .navbar-mlb .navbar-brand {
            font-size: 1.8rem;
            font-weight: 700;
            color: white !important;
            padding: 15px 20px;
            background: var(--mlb-red);
        }

        .navbar-mlb .nav-link {
            color: white !important;
            font-weight: 600;
            padding: 20px 15px !important;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
            transition: background 0.3s;
        }

        .navbar-mlb .nav-link:hover {
            background: var(--mlb-light-blue);
        }

        .navbar-mlb .nav-link.active {
            background: var(--mlb-red);
        }

        .badge-mlb {
            background: var(--mlb-red);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px 10px 0 0 !important;
            padding: 1rem 1.5rem;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    {% include 'includes/navbar_mlb.html' %}

    <!-- Messages (hidden, converted to toasts) -->
    {% if messages %}
        <div class="messages-container" style="display: none;">
            {% for message in messages %}
                <div class="django-message" data-tag="{{ message.tags }}" data-message="{{ message|escapejs }}">
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- Main Content -->
    <main class="container my-4">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-light text-center py-3 mt-5">
        <div class="container">
            <p class="text-muted mb-0">&copy; 2025 NCS International. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script id="admin-js" src="{% static 'js/admin.js' %}"></script>
    <script>
        // Agregar parámetro de versión dinámico para evitar caché
        (function() {
            const script = document.getElementById('admin-js');
            if (script) {
                const now = new Date();
                const version = now.getFullYear().toString() +
                               String(now.getMonth() + 1).padStart(2, '0') +
                               String(now.getDate()).padStart(2, '0') +
                               String(now.getHours()).padStart(2, '0') +
                               String(now.getMinutes()).padStart(2, '0');
                script.src = script.src.split('?')[0] + '?v=' + version;
            }
        })();
    </script>
    <script>
        // Convert Django messages to modern toasts
        document.addEventListener('DOMContentLoaded', function() {
            const messages = document.querySelectorAll('.django-message');
            messages.forEach(function(msg) {
                const tag = msg.getAttribute('data-tag');
                const message = msg.getAttribute('data-message');

                // Map Django message tags to toast types
                let toastType = 'info';
                if (tag === 'success') toastType = 'success';
                else if (tag === 'error' || tag === 'danger') toastType = 'error';
                else if (tag === 'warning') toastType = 'warning';
                else if (tag === 'info') toastType = 'info';

                // Show toast if adminDashboard is available
                if (window.adminDashboard) {
                    window.adminDashboard.showToast(message, toastType);
                } else {
                    // Fallback: wait for adminDashboard to be initialized
                    setTimeout(function() {
                        if (window.adminDashboard) {
                            window.adminDashboard.showToast(message, toastType);
                        }
                    }, 500);
                }
            });
        });
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>

